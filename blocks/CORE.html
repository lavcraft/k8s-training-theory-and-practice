<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/k8s-training-theory-and-practice/_next/static/css/ca90925f3222e7b7.css" as="style"/><link rel="stylesheet" href="/k8s-training-theory-and-practice/_next/static/css/ca90925f3222e7b7.css" data-n-g=""/><link rel="preload" href="/k8s-training-theory-and-practice/_next/static/css/1859fc0bd12f977a.css" as="style"/><link rel="stylesheet" href="/k8s-training-theory-and-practice/_next/static/css/1859fc0bd12f977a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/k8s-training-theory-and-practice/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/k8s-training-theory-and-practice/_next/static/chunks/webpack-c9d18d9ff523e3b5.js" defer=""></script><script src="/k8s-training-theory-and-practice/_next/static/chunks/framework-6e4ba497ae0c8a3f.js" defer=""></script><script src="/k8s-training-theory-and-practice/_next/static/chunks/main-c66f0a32f1840de0.js" defer=""></script><script src="/k8s-training-theory-and-practice/_next/static/chunks/pages/_app-19425516165713a1.js" defer=""></script><script src="/k8s-training-theory-and-practice/_next/static/chunks/425-c6bfafa2e8a7611b.js" defer=""></script><script src="/k8s-training-theory-and-practice/_next/static/chunks/pages/blocks/%5BblockKey%5D-78981021e5df7acf.js" defer=""></script><script src="/k8s-training-theory-and-practice/_next/static/cXffKvlLOePk-11GuctoB/_buildManifest.js" defer=""></script><script src="/k8s-training-theory-and-practice/_next/static/cXffKvlLOePk-11GuctoB/_ssgManifest.js" defer=""></script><script src="/k8s-training-theory-and-practice/_next/static/cXffKvlLOePk-11GuctoB/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="_blockKey__container__PBosc"><h1 id="intro-to-kubernetes">Intro to Kubernetes<a aria-hidden="true" tabindex="-1" href="#intro-to-kubernetes"><span class="icon icon-link"></span></a></h1>
<p>8-12 —á–∞—Å–æ–≤, 2-3 –∞–∫. –¥–Ω—è.</p>
<h1 id="prerequisites">Prerequisites<a aria-hidden="true" tabindex="-1" href="#prerequisites"><span class="icon icon-link"></span></a></h1>
<ol>
<li>RAM ‚â• 8Gb</li>
<li><a href="#link-to-docker-part">–ü—Ä–æ–π–¥–µ–Ω—ã–Ω–µ –∑–∞–¥–∞–Ω–∏–µ —Å —Ç—Ä–µ–Ω–∏–≥–∞ –ø–æ Docker</a></li>
<li><a href="#link-to-confluence">–†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –∫–ª–∞—Å—Ç–µ—Ä k8s –Ω–∞ –ø–∞—Ä—É</a></li>
<li>terminal</li>
<li>kubectl cli</li>
</ol>
<h1 id="core---program">Core - Program<a aria-hidden="true" tabindex="-1" href="#core---program"><span class="icon icon-link"></span></a></h1>
<p>–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å –æ—Å–Ω–æ–≤–∞–º–∏ —Ä–∞–±–æ—Ç—ã K8S
–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≤—ã–∫–æ–≤ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.
–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ —Å–æ—Ñ—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.</p>
<ul>
<li>—á—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ K8S</li>
<li>—á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ</li>
<li>—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è K8S –∏ –ø–æ–¥—Ö–æ–¥—ã –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π</li>
<li>–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç K8S</li>
</ul>
<h2 id="–≤–≤–µ–¥–µ–Ω–∏–µ-–≤-k8s">–í–≤–µ–¥–µ–Ω–∏–µ –≤ K8S<a aria-hidden="true" tabindex="-1" href="#–≤–≤–µ–¥–µ–Ω–∏–µ-–≤-k8s"><span class="icon icon-link"></span></a></h2>
<ol>
<li>–ó–∞—á–µ–º –Ω—É–∂–µ–Ω K8S? –§—É–Ω–∫—Ü–∏–∏ –∏ –∑–∞—á–µ–º –Ω–∞–º –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è.</li>
<li>–ü—Ä–æ—Ü–µ—Å—Å –û–° &quot;–Ω–∞ —Å—Ç–µ—Ä–æ–∏–¥–∞—Ö&quot;: –≤ —á—ë–º –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞, —á—Ç–æ K8S –¥–µ–ª–∞–µ—Ç –∑–∞ –º–µ–Ω—è?</li>
<li>–ú–µ—Ç–∞—Ñ–æ—Ä–∞ –º–æ—Ä—Å–∫–æ–≥–æ –ø–æ—Ä—Ç–∞</li>
<li>–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–µ–ª K8S –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–∏—Ç–∏—è</li>
<li>–ü–∞—Ä–∞–¥–∏–≥–º–∞ Cloud Native (DevOps+CI/CD+Microservices+Containers) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–æ—Ç—Å—ã–ª–∫–∏ –∫ —Ç—Ä–µ–Ω–∏–Ω–≥—É –ø–æ Docker –∏ 12
factor apps)</li>
<li>K8S –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - Capabilities (Self-Service, API-Driven, Elastic)</li>
<li>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å —á–µ–º –º—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —ç—Ç–æ–º —Ç—Ä–µ–Ω–∏–Ω–≥–µ<!-- -->
<ul>
<li><code>ssh</code></li>
<li><code>kubectl</code></li>
<li>linux shell (<code>bash</code> or <code>zsh</code>)</li>
<li><code>curl</code></li>
<li><code>watch</code></li>
<li><code>nslookup/dig</code></li>
</ul>
</li>
<li><strong>–î–µ–º–æ</strong>. CLI –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª–∞—Å—Ç–µ—Ä—É</li>
</ol>
<h2 id="hands-on-practice-quest-00-requisites-check-and-compatibility-check">Hands-on practice quest #00: requisites check and compatibility check<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-00-requisites-check-and-compatibility-check"><span class="icon icon-link"></span></a></h2>
<p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–∞–±–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã</p>
<ul>
<li>–Ω–∞–ª–∏—á–∏–µ kubectl - —Å –Ω–∏–º –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–∏ –≤—Å–µ–≥–æ –∫—É—Ä—Å–∞, –Ω–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</li>
<li>[optional] docker - –Ω—É–∂–µ–Ω/–ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∫–∏ –¥–µ–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è —ç–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–∞—Ä—É—á–Ω–æ</li>
</ul>
<p><strong>Given</strong> —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –≤ —Å–∏—Å—Ç–µ–º—É —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —É—Ç–∏–ª–∏—Ç—ã.</p>
<blockquote>
<p>–° —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–æ–º–æ–∂–µ—Ç <a href="HELP-1-K8S-REQUIREMENTS.md">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ RHEL –ø–æ–¥–æ–±–Ω—ã—Ö —Å–∏—Å—Ç–µ–º</a></p>
</blockquote>
<p><strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç –∏—Ö –≤—ã–≤–æ–¥ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ</p>
<pre><code class="language-shell">kubectl

# optional. Need for rebuild demo apps
#docker version
# optional. Need for configure secrets from docker config istead of raw secret creation
#docker login {{dockerRepository}}
</code></pre>
<pre><code class="language-shell"># –≤—ã–≤–µ–¥–µ–º &quot;—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é&quot; –¥–ª—è –∞–≤—Ç–æ –∫–æ–º–ø–ª–∏—Ç–∞
kubectl completion bash
# –ø—Ä–∏–º–µ–Ω–∏–º –µ—ë
source &lt;(kubectl completion bash)
</code></pre>
<pre><code class="language-shell">ls -la ~/.kube
kubectl cluster-info
</code></pre>
<pre><code class="language-shell">git clone https://gitlabci.raiffeisen.ru/container-trainings/training-k8s
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –≤–æ–∑–Ω–∏–∫—à–∏–º–∏ –∏ —Ä–µ—à–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã</p>
<ul>
<li>–ö–∞–∫–∞—è –≤–µ—Ä—Å–∏—è kubernetes –∫–ª–∞—Å—Ç–µ—Ä–∞ —É –≤–∞—Å?</li>
<li>–ö–∞–∫–∞—è –≤–µ—Ä—Å–∏—è kubectl –Ω—É–∂–Ω–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞?</li>
<li>–ö–∞–∫–∏–µ –≤–µ—Ä—Å–∏–∏ kubectl —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –∫–∞–∫–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞?</li>
<li>–û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è –ø–∞–ø–∫–∞ <code>~/.kube</code> ?</li>
<li>–ï—Å—Ç—å –ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –∫–∞–∫–æ–π –æ–±–æ–ª–æ—á–∫–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã? BASH/ZSH/FISH/ETC</li>
<li><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>*: –ù–∞–ø–∏—Å–∞—Ç—å config –¥–ª—è kubernetes —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏ - prod/dev (—Å–º–æ—Ç—Ä—è—Ç –Ω–∞ —Ä–∞–∑–Ω—ã–µ namespace –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ. dev - –≤–∞—à –Ω–µ–π–º—Å–ø–µ–π—Å. prod - –Ω–µ–π–º—Å–ø–µ–π—Å osttok)</li>
<li><a href="https://kubernetes.io/docs/tasks/tools/included/optional-kubectl-configs-bash-linux/#enable-kubectl-autocompletion">Enable kubectl completion howto</a></li>
</ul>
<h2 id="k8s-authentication">K8S Authentication<a aria-hidden="true" tabindex="-1" href="#k8s-authentication"><span class="icon icon-link"></span></a></h2>
<ol>
<li>K8S <em>–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏</em> - PKS/TKGI/Cloud</li>
<li>–ö–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏? CLI or GUI ?</li>
<li>kubectl CLI –∏ –º–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤. –ö–∞–∫ –ø–æ–Ω—è—Ç—å –≥–¥–µ —Å–µ–±—è –æ–±—Å–ª—É–∂–∏—Ç—å</li>
<li>kubectl config get-contexts</li>
<li>tkgi cli</li>
</ol>
<h2 id="hands-on-practice-quest-01-connect-to-existed-cluster">Hands-on practice quest #01: connect to existed cluster<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-01-connect-to-existed-cluster"><span class="icon icon-link"></span></a></h2>
<p>–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–ª–∞—Å—Ç–µ—Ä—É K8S</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞<br/>
<strong>–ó–∞–¥–∞—á–∞</strong>: —É–∑–Ω–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ</p>
<pre><code class="language-shell">kubectl config -h
cat ~/.kube/config
</code></pre>
<pre><code class="language-shell">kubectl config view
</code></pre>
<pre><code class="language-shell">kubectl config get-contexts
</code></pre>
<pre><code class="language-shell">kubectl config use-context \tab
kubectl auth can-i --list 
</code></pre>
<p>üëÄ <a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#role-binding-examples">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –ø—Ä–∞–≤–∞ –∏ RBAC</a></p>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –≤–æ–∑–Ω–∏–∫—à–∏–º–∏ –∏ —Ä–µ—à–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã</p>
<ol>
<li>–ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞?</li>
<li>–ö–∞–∫ —è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤—ã–≤–∞—é—Å—å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ?</li>
<li>–ö—Ç–æ –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –≤ —á—ë–º –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è &quot;–ø–µ—Ä–µ–¥–∞—á–∞&quot;?</li>
<li>–ú–æ–∂–Ω–æ –ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ kubernetes —Å –ø–æ–º–æ—â—å—é Ouath 2.0/OIDC —Ç.–µ —á–µ—Ä–µ–∑ &quot;–°–æ—Ü—Å–µ—Ç–æ—á–∫–∏&quot;?</li>
<li>–ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä—ã –±–µ–∑ use-context?</li>
<li>–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –Ω–µ –Ω–∞ &quot;—Ç–µ—Ö&quot; –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö?</li>
<li>–ö–∞–∫ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã —Ä–µ—Å—É—Ä—Å—ã –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤–æ –¥–Ω–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ?</li>
<li>–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å —Å–≤–æ–π namespace –ø–æ–ª —É–º–æ–ª—á–∞–Ω–∏—é?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –¥—Ä—É–≥–∏–º <code>namespace</code></li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è <code>KUBECONFIG</code>. –ß—Ç–æ –±—É–¥–µ—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏ –ø—Ä–∏ –≤—ã–≤–æ–¥–µ <code>kubectl config view</code>? <a href="https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/">–û KUBECONFIG</a></li>
</ol>
<h2 id="k8s-concepts">K8S Concepts<a aria-hidden="true" tabindex="-1" href="#k8s-concepts"><span class="icon icon-link"></span></a></h2>
<ol>
<li>Declarative vs Imperative</li>
<li>Control loop (Observe, Orient, Decide, Act) Jonh Boyd</li>
<li>Reconciliation</li>
<li>Real control loop examples by kubectl - Desired state vs Current stats (Observe, diff ,act Control model)</li>
<li>Kubernetes API-Server and OpenAPI</li>
</ol>
<p>üõí <em>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</em></p>
<ol>
<li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/">–ù–∞—Å—Ç—Ä–æ–∫–π–∫–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ docker-registry k8s</a></li>
<li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/">K8S –∏ Private Registry</a></li>
<li><a href="https://kubernetes.io/docs/concepts/policy/limit-range/">K8S LimitRanges</a></li>
</ol>
<h3 id="hands-on-practice-quest-02-i-have-an-application-i-wish-deploy-it-to-production">Hands-on practice quest #02: I have an application, I wish deploy it to production!<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-02-i-have-an-application-i-wish-deploy-it-to-production"><span class="icon icon-link"></span></a></h3>
<p>–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å –±–∞–∑–æ–≤—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ kubectl - –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Å—Ç–µ–π—à—É—é —Ä–∞–±–æ—Ç—É –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –∏ –ª–æ–≤–∏–º —Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ—à–µ–¥—à–∏—Ö Docker —Ç—Ä–µ–Ω–∏–Ω–≥<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –¥–µ–ø–ª–æ—è—Ç –≤ –∫–ª–∞—Å—Ç–µ—Ä</p>
<pre><code class="language-shell">kubectl create job test --image=busybox -- echo &quot;Hello World&quot;
</code></pre>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ü–æ–Ω—è—Ç—å —Å—Ä–∞–±–æ—Ç–∞–ª–∞ –ª–∏ –Ω–∞—à–∞ –∑–∞–¥–∞—á–∞</p>
<ol>
<li>–ü–æ—á–µ–º—É –Ω–µ –≤—ã–≤–µ–ª–∏—Å—å –ª–æ–≥–∏?</li>
<li>–ü–æ—á–µ–º—É —É –ø–æ–¥–∞ —Ç–∞–∫–æ–µ —Å—Ç—Ä–∞–Ω–Ω–æ–µ –∏–º—è?</li>
</ol>
<pre><code class="language-shell">kubectl describe pod test-&lt;id&gt;

kubectl create job test --image=artifactory.raiffeisen.ru/ext-techimage-docker/busybox -- echo &quot;Hello World&quot; 

kubectl get pods
kubectl get jobs

kubectl logs jobs/test
kubectl delete job test
kubectl get pods
</code></pre>
<p><strong>Then</strong>: —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –º—ã—Å–ª—è–º–∏ –∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã</p>
<ol>
<li>–≤ —á—ë–º —Ä–∞–∑–ª–∏—á–∏–µ –≤ —Å–µ–º–∞–Ω—Ç–∏–∫–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ - <code>kubectl get job test</code> –∏ <code>kubectl get jobs/test</code>? –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—ä—è—Å–Ω–∏—Ç—å</li>
<li>—á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥—É –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤ –≤–≤–µ—Å—Ç–∏ —Ç–∞–∫ –∂–µ —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ (—á–µ—Ä–µ–∑ / –∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª)?</li>
<li>—É–¥–∞–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π pod –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è job test?</li>
</ol>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–∑ —Å curl, dig –ø—Ä–æ—á–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –¥–µ–±–∞–≥–∞</p>
<pre><code class="language-shell"># –ü–æ–ø—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–∑ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—è, —Ç—Ä–µ–±—É—â–µ–≥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
# INFO: –ü—Ä–∏–≥–æ–¥–∏—Ç—Å—è –Ω–∞–º –≤ –±—É–¥—É—â–µ–º –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ü–µ–ª–µ–π
kubectl run -it debug --image=artifactory.raiffeisen.ru/ext-rbru-container-community-docker/cli-tools -- /bin/sh
kubectl get events
kubectl create secret docker-registry regcred --docker-server=&lt;your-registry-server&gt; --docker-username=&lt;your-name&gt; --docker-password=&lt;your-pword&gt;
# &lt;your-registry-server&gt; - –Ω–∞–ø—Ä–∏–º–µ—Ä https://artifactory.raiffeisen.ru
kubectl explain serviceaccount.imagePullSecrets
kubectl patch serviceaccount default -p &#x27;{&quot;imagePullSecrets&quot;: [{&quot;name&quot;: &quot;regcred&quot;}]}&#x27;

kubectl run -it debug --image=artifactory.raiffeisen.ru/ext-rbru-container-community-docker/cli-tools -- /bin/sh

kubectl get pods
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –º—ã—Å–ª—è–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–∫—É–¥–∞ –Ω—É–∂–Ω–æ –∑–∞–ø—É—à–∏—Ç—å –æ–±—Ä–∞–∑ —á—Ç–æ–±—ã kubernetes –∫–ª–∞—Å—Ç–µ—Ä –µ–≥–æ —É—Å–ø–µ—à–Ω–æ —Å–ø—É–ª–∏–ª?</li>
<li>–∫–∞–∫–æ–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è –æ–±—Ä–∞–∑–æ–≤?</li>
<li>—á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è Job –æ—Ç Pods?</li>
<li>–∫–æ–≥–¥–∞ —É–¥–∞–ª—è–µ—Ç—Å—è Pod —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Job?</li>
<li>–∫—Ç–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–µ–Ω –∑–∞ —ç—Ç–æ —É–¥–∞–ª–µ–Ω–∏–µ?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ö–∞–∫ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è <code>regcred</code> —Å–µ–∫—Ä–µ—Ç–∞ –µ—Å–ª–∏ –≤—ã —É–∂–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã –≤ docker registry —á–µ—Ä–µ–∑ docker login?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ <code>serviceaccount</code> –Ω–µ —á–µ—Ä–µ–∑ patch –∞ —á–µ—Ä–µ–∑ <code>kubectl edit</code>. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –æ—à–∏–±–∏—Ç—å—Å—è –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–º –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥ —Å –ª–∏–º–∏—Ç–∞–º–∏ –ø–æ –ø–∞–º—è—Ç–∏ –≤ 16mb. <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/">About K8S Limits</a></li>
</ol>
<h2 id="k8s-container-isolation">K8S Container isolation<a aria-hidden="true" tabindex="-1" href="#k8s-container-isolation"><span class="icon icon-link"></span></a></h2>
<ol>
<li>Clusters and nodes</li>
<li>Clusters network isolation</li>
<li>Application in cluster resources</li>
<li>Cluster network availability</li>
<li>Docker run in Kubernetes and minimal configuration. Namespaces and pods fast introduction</li>
<li>–î–µ–º–æ kubectl apply/get/describe –∏ output –º–æ–¥—ã</li>
</ol>
<p>üõí <em>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</em></p>
<ol>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/resource_management_guide/index">–ü–æ–¥—Ä–æ–±–Ω–æ –æ —Ä–µ—Å—É—Ä—Å–∞—Ö –∏ CGroups</a></li>
<li><a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits">–ü—Ä–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª–∏–º–∏—Ç–æ–≤</a></li>
</ol>
<h3 id="hands-on-practice-quest-03-run-apps-in-cluster">Hands-on practice quest #03: Run apps in cluster<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-03-run-apps-in-cluster"><span class="icon icon-link"></span></a></h3>
<p>–ü–æ–∑–Ω–∞—ë–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–µ) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –≤ —Å–≤—è–∑–∫–µ —Å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è–º–∏ K8S (Pod).
–î–µ–ª–∞–µ–º —ç—Ç–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –¥–µ–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è &quot;–Ω–æ–∂&quot; –∏ &quot;–º–∞—Å–ª–æ&quot;</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –æ–ø–∏—Å—ã–≤–∞—é—Ç –ø–æ–¥—ã —Å –¥–≤—É–º—è —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –º–µ–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ kubernetes</p>
<pre><code class="language-shell">cat handson/handson-03/apps-01.yml
kubectl apply -f handson/handson-03/apps-01.yml
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ö–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∞?</li>
<li>–ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫—É</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ–¥–∞?</li>
</ol>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫—É –ø–æ–ª—å–∑—É—è—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π <code>kubectl explain</code></p>
<pre><code class="language-shell"># INFO: –ù–µ –∑–∞–±—ã–≤–∞–µ–º —á—Ç–æ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
kubectl config set-context --current --namespace=&lt;&gt;
kubectl explain pod.spec
kubectl edit butter-fabric
</code></pre>
<p><strong>Then</strong>: —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è–º–∏ –∏ —Ä–∞–∑–±–∏—Ä–∞—é—Ç—Å—è —á—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</p>
<ol>
<li>–ö–∞–∫–∏–µ –≤–æ–∑–Ω–∏–∫–ª–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏? –û–±—ä—è—Å–Ω–∏—Ç–µ –ø–æ—á–µ–º—É —Ç–∞–∫?</li>
<li>–ö–∞–∫ —É–∑–Ω–∞—Ç—å —á—Ç–æ –µ—â—ë –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã <code>kubectl explain</code>?</li>
</ol>
<p>üëÄ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ <code>kubectl explain</code> —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É–µ—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ —Ä–µ—Å—É—Ä—Å–∞ K8S</p>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ</p>
<pre><code class="language-shell">kubectl delete -f handson/handson-03/apps-01.yml
kubectl apply -f handson/handson-03/apps-02.yml
kubectl explain pod.spec.containers.resources
# add limits 8Mi –∏ cpu 200m
kubectl edit pod app-butter
vi handson/handson-03/apps-02.yml
kubectl apply -f handson/handson-03/apps-02.yml
kubectl get pods
</code></pre>
<p>üëÄ <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits">–ü—Ä–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª–∏–º–∏—Ç–æ–≤</a></p>
<p><strong>Then</strong> –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—Éc—Ç–∏–ª–æ—Å—å</p>
<ol>
<li>–ù–∞–π—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã</li>
<li>–ù–∞–π—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å</li>
<li>–í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –ø–æ–¥—ã —Å –æ—à–∏–±–æ—á–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ <code>name/image - status</code>. –°–º–æ—Ç—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é jsonpath/go-template <a href="https://kubernetes.io/docs/reference/kubectl/jsonpath/">kubectl jsonpath doc</a></li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ó–∞–¥–∞–π—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫–≤–æ—Ç—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –≤–∞—à–µ–º namespace</li>
</ol>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ö–∞–∫ —É–∑–Ω–∞—Ç—å —á—Ç–æ —Ç–∞–º —Å –Ω–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã?</li>
<li>–ï—Å–ª–∏ –¥—Ä—É–≥–æ–π –∑–∞–¥–µ–ø–ª–æ–∏—Ç –ø–æ–¥ —Å —Ç–∞–∫–∏–º –∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ–º, –æ–Ω –ø–µ—Ä–µ–∑–∞—Ç—Ä—ë—Ç –º–æ–π?</li>
<li>–ê –≤ –∫–∞–∫–æ–π namespace –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–¥–µ–ø–ª–æ–∏–ª–æ—Å—å?</li>
<li>–ê –Ω–∞ –∫–∞–∫–æ–º —É–∑–ª–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å?</li>
<li>–ö–∞–∫ —É–∑–Ω–∞—Ç—å –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ?</li>
<li>–ß—Ç–æ –∑–Ω–∞—á–∞—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ CPU 200mi ? –≠—Ç–æ —Å–∫–æ–ª—å–∫–æ?</li>
<li>–∫–∞–∫ –ø–æ–Ω—è—Ç—å –∫–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –º–µ–Ω—è?</li>
<li>–∫–∞–∫ –ø–æ–Ω—è—Ç—å –∫–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–∞–º–∫–∞—Ö –Ω–µ–π–º—Å–ø–µ–π—Å–∞??</li>
<li>–∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å—ã—Ä–æ–π –≤—ã–≤–æ–¥ api?</li>
<li>–ø–æ–ª—É—á–∏–ª–æ—Å—å –ª–∏ —É –≤–∞—Å –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? –ö–∞–∫–∏–µ –±—ã–ª–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –û–±—ä—è—Å–Ω–∏—Ç–µ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –µ–º—É –Ω—É–∂–Ω–æ –≤—ã–∫–ª—é—á–∞—Ç—å—Å—è? –° –ø–æ–º–æ—â—å—é –∫–∞–∫–∏—Ö –∫–æ–º–∞–Ω–¥ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —É–∑–Ω–∞—Ç—å –∫—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è, <code>app-knife</code> –∏–ª–∏ <code>app-butter</code>?</li>
</ol>
<h2 id="k8s-application-networking">K8S Application networking<a aria-hidden="true" tabindex="-1" href="#k8s-application-networking"><span class="icon icon-link"></span></a></h2>
<ol>
<li>–í–∏–¥—ã Service Discovery –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ö–æ–º–ø—Ä–æ–º–∏—Å—Å—ã –∫–∞–∂–¥–æ–≥–æ</li>
<li>–†–æ—É—Ç–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä –∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞, NSX-T –∏ K8S</li>
<li>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</li>
<li>K8S Services and namespaces</li>
<li>–î–µ–º–æ kubectl exec curl —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º watch –¥–ª—è get pods/get svc -o wide</li>
</ol>
<p>üõí <em>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</em></p>
<ol>
<li><a href="https://kubernetes.io/docs/tasks/access-application-cluster/port-forward-access-application-cluster/">kubectl port-forward docs</a></li>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pods">DNS Pod Service</a></li>
<li><a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/">Debugging DNS Resolution</a></li>
<li><a href="https://man7.org/linux/man-pages/man5/resolv.conf.5.html">man resolv.conf</a></li>
</ol>
<h2 id="hands-on-practice-quest-04-access-to-application-via-services">Hands-on practice quest #04: Access to application via services<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-04-access-to-application-via-services"><span class="icon icon-link"></span></a></h2>
<p>–ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, –∏—Å—Å–ª–µ–¥—É–µ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.
–°—Ç–∞—Ä–∞–µ–º—Å—è –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –Ω–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—ã—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ó–∞–ø—É—Å—Ç–∏—Ç—å cli-tools –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
<blockquote>
<p>–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ <a href="#hands-on-practice-quest-03-run-apps-in-cluster">handson #03</a></p>
</blockquote>
<pre><code class="language-shell"># –ø—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ –µ—Å—Ç—å –ø–æ–¥ debug, –∏–Ω–∞—á–µ –∑–∞–ø—É—Å—Ç–∏–º (—Å–º handson #02)
kubectl get pod debug 
# –û—Ç–∫—Ä–æ–µ–º –Ω–æ–≤—É—é –∫–æ–Ω—Å–æ–ª—å
# –ó–∞–π–¥—ë–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –±—É–¥–µ–º –Ω–µ–≥–æ –±—É–¥–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –¥–µ–±–∞–≥ –Ω–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
kubectl exec -it debug -- /bin/bash
...
</code></pre>
<ol>
<li><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –° –ø–æ–º–æ—â—å—é –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∏–∂–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ IP –∞–¥—Ä–µ—Å—Å –∏ –∏–º—è –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ <code>Pod</code> –∏ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–∏—Å—É <code>app-knife</code>
<blockquote>
<p>–ß—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å - <a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/">Debugging DNS Resolution</a>
–∏ <a href="https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pods">DNS Pod Service</a></p>
</blockquote>
</li>
<li><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –î–æ–ø–∏—à–µ—Ç–µ —Å–µ—Ä–≤–∏—Å –¥–ª—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ app-knife</li>
</ol>
<pre><code class="language-shell">cat handson/handson-04/services.yml
kubectl explain service.spec
kubectl expose --help
# –ø—Ä–∏–º–µ–Ω—è–µ–º –∏—Ö
kubectl apply -f  handson/handson-04/services.yml
kubectl get services
kubectl get endpoints
</code></pre>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞? (<a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#motivation">–û –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ labels</a>)</p>
<ol>
<li>–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–π —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ <code>kubectl delete pod app-knife/app-butter</code>? –ü–æ–¥—É–º–∞–π—Ç–µ –ø–æ—á–µ–º—É?</li>
<li>–†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ <code>kubectl port-forward pod/app-knife 8080</code> –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω <code>containerPort</code>?</li>
<li>–ù–∞ —á—Ç–æ –≤–ª–∏—è–µ—Ç containerPort –≤ pod.spec.containers.ports.containerPort?</li>
<li>–ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–π –∫–æ–º–∞–Ω–¥–µ <code>kubectl port-forward pod/app-knife 8080</code> –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å pod app-knife?</li>
</ol>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ó–∞—Å—Ç–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å <code>app-butter-service</code> –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å json –æ—Ç–≤–µ—Ç. (–°–æ–≤–µ—Ç: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, –æ—Ç–≤–µ—á–∞—è –Ω–∞ –æ—Ç–≤–µ—Ç—ã –¥–∞–ª—å—à–µ –ø–æ —Å–ø–∏—Å–∫—É)</p>
<ol>
<li>–û–±—ä—è—Å–Ω–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç —Å–µ—Ä–≤–∏—Å–∞ <code>app-knife</code> –≤ —Å–ª—É—á–∞—è—Ö:<!-- -->
<ol>
<li>–Ω–µ —Å–µ—Ä–≤–∏—Å–∞ <code>app-butter-service</code>.</li>
<li>–µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å <code>app-butter-service</code> –Ω–æ –Ω–µ—Ç labels —É <code>app-butter</code>. (–í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å–± debug –ø–æ–¥–æ–º –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç <code>app-butter-service</code>)</li>
<li>–µ—Å—Ç—å –∏ —Å–µ—Ä–≤–∏—Å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â–∏–π –µ–º—É <code>labels.app</code>? (–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–æ–π <code>kubectl edit pod app-butter</code> –∏ –¥–æ–±–∞–≤–∏—Ç—å <code>metadata.labels.app=app-butter</code></li>
</ol>
</li>
<li>–ú–æ–∂–Ω–æ –ª–∏ –≤–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —à–µ–ª –≤ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ?</li>
<li>–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–µ –∑–∞—Ö–æ–¥—è –≤ –Ω–µ–≥–æ?</li>
</ol>
<p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ debug –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:</p>
<pre><code class="language-shell">kubectl get pods
[debug] $ nslookup &lt;pod-ip&gt;
[debug] $ nslookup &lt;pod-name&gt;
[debug] $ nslookup &lt;service-ip&gt;
[debug] $ nslookup &lt;service-name&gt;
</code></pre>
<p><strong>Then</strong> nslookup –≤—ã–¥–∞–ª –æ–±—Ä–∞—Ç–Ω—ã–µ –∑–æ–Ω—ã –ø–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–º IP</p>
<ol>
<li>–ö—Ç–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–µ–Ω –∑–∞ —ç—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ?</li>
<li>–ö–∞–∫ –Ω–∞–π—Ç–∏ –∫—Ç–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–µ–Ω?</li>
<li>–ú–æ–∂–Ω–æ –ª–∏ –µ–≥–æ –ø–µ—Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å?</li>
<li><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ù–∞–π—Ç–∏ –∫—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ DNS –∏–º–µ–Ω–∏</li>
</ol>
<p>üëÄ <a href="https://man7.org/linux/man-pages/man5/resolv.conf.5.html">man resolv.conf</a></p>
<pre><code class="language-shell">[debug] $ cat /etc/resolv.conf
kubectl get services --all-namespaces | grep &lt;nameserver-ip&gt;
kubectl get pods --namespace=kube-system -l k8s-app=kube-dns
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –æ—Ç–≤–µ—á–∞—è –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:</p>
<ol>
<li>–ö–∞–∫ —É–∑–Ω–∞—Ç—å —á—Ç–æ —Å–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ?</li>
<li>–†–µ—Å—Ç–∞—Ä—Ç–æ–≤–∞–ª–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ <code>kubectl apply -f pod.yml</code> –∏ –ø–æ—á–µ–º—É?</li>
<li>–ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å <code>metadata.labels.app</code> ?</li>
<li>–ß—Ç–æ –µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–∏—Å—É?</li>
<li>–ö—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç <code>kube-dns</code> ?</li>
<li>–ö–∞–∫ –¥–∏–∞–≥–Ω–∞—Å—Ç–∏—Ä–æ–≤–∞—Ç—å <code>kube-dns</code> ?</li>
</ol>
<h2 id="k8s-internal-and-external-access-to-containers">K8S Internal and External access to containers<a aria-hidden="true" tabindex="-1" href="#k8s-internal-and-external-access-to-containers"><span class="icon icon-link"></span></a></h2>
<ol>
<li>Containers Shell</li>
<li>K8S Ingress –∏ –µ–≥–æ –æ–ø–∏—Å–∞–Ω–∏–µ</li>
<li>kubectl exec</li>
</ol>
<p>üõí <em>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</em></p>
<ol>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± ingress</a></li>
</ol>
<h2 id="hands-on-practice-quest-05-redeploy-application-with-ingress">Hands-on practice quest #05: Redeploy application with ingress<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-05-redeploy-application-with-ingress"><span class="icon icon-link"></span></a></h2>
<p>–ê–Ω–æ–Ω—Å–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏–∑ –≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞. –ü–æ–¥—ã–º–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —É—á–∏–º—Å—è –∏—Å–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –ø–æ–º–æ—â—å—é –∏–∑—É—á–µ–Ω–Ω—ã—Ö —Ä–∞–Ω–µ–µ –∫–æ–º–∞–Ω–¥</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø –∏–∑ —Å–µ—Ç–∏ –±–∞–Ω–∫–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Å–ª–µ–¥—É—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º</p>
<pre><code class="language-shell"># –¥–∞–ª–µ–µ –º—ã –¥–æ–ª–∂–Ω—ã —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Ç–µ—Å—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–ª
watch -n0.1 curl -s -i http://app-knife-ingress.&lt;namespace-name&gt;.lb.&lt;cluster-name&gt;.k8s.raiffeisen.ru
kubectl explain ingress.spec
# –ó–∞–≤–µ—Ä—à–∏—Ç–µ ingress –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
vi handson/handson-05/ingress.yml
kubectl apply -f handson/handson-05/ingress.yml
</code></pre>
<p><strong>Then</strong> <code>watch</code> –≤–µ—Ä–Ω—É–ª –æ—Ç–≤–µ—Ç <em>app-knife</em> —Å–µ—Ä–≤–∏—Å–∞. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ö–∞–∫ —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–∏—Å–∞? –ü–æ—á–µ–º—É —à–∞–±–ª–æ–Ω DNS –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π?</li>
<li>–ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å DNS –∏–º—è –Ω–µ –ø–æ —à–∞–±–ª–æ–Ω—É? (my-awesome-domain.ru)</li>
<li>–ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å?</li>
<li>–ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Å—Å—ã–ª–∞–µ–º—Å—è –≤ ingress –Ω–µ –±—É–¥–µ—Ç?</li>
<li>–ß—Ç–æ —Å–ª—É—á–∏—Ç—Å—è –µ—Å–ª–∏ –µ–≥–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã? –ü–æ—á–µ–º—É?</li>
<li>–ö–∞–∫ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –≤–Ω—É—Ç—Ä–∏?</li>
<li>–°–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?</li>
<li>–ö–∞–∫ ingress —Å–≤—è–∑–∞–Ω —Å ingress-controller?</li>
<li>–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è ingress-controller?</li>
<li>–ö—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ &quot;–∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ&quot; –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏–º—ë–Ω —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∏–º—ë–Ω –¥–ª—è ingress?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏ API —Å –ø–æ–º–æ—â—å—é <code>kubectl explain ingress</code>?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ü–µ—Ä–µ–ø–∏—à–∏—Ç–µ ingress —Å beta –≤–µ—Ä—Å–∏–∏ API –Ω–∞ —Ä–µ–ª–∏–∑–Ω—É—é - <code>networking.k8s.io/v1</code></li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ ingress, DNS –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è? –ï—Å–ª–∏ –¥–∞ —Ç–æ –∫–∞–∫?</li>
</ol>
<h2 id="k8s-namespace-pods-containers-again-and-scaling">K8S Namespace, Pods, Containers again and Scaling<a aria-hidden="true" tabindex="-1" href="#k8s-namespace-pods-containers-again-and-scaling"><span class="icon icon-link"></span></a></h2>
<ol>
<li>ReplicaSet</li>
<li>Deployment</li>
<li>TopologyKey</li>
</ol>
<h2 id="hands-on-practice-quest-06-redeploy-application-with-replicas">Hands-on practice quest #06: Redeploy application with replicas<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-06-redeploy-application-with-replicas"><span class="icon icon-link"></span></a></h2>
<p>–ò–∑—É—á–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤–æ–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ —Å —É—á—ë—Ç–æ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∂–∏–∑–Ω–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –ø–æ–¥–µ –Ω–∞ –∑–∞–ø—É—Å–∫ c –ø–æ–º–æ—â—å—é deployment (–¥–ª—è app-butter –∏ app-knife)</p>
<pre><code class="language-shell">[tty0] $ watch -e -n0.1 curl --fail --show-error -s -i app-butter-ingress.&lt;namespace-name&gt;.lb.&lt;cluster-name&gt;.k8s.raiffeisen.ru
[tty1] kubectl explain deployment
# –ø—Ä–∏–º–µ–Ω—è–µ–º –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç
## —Å–º–æ—Ç—Ä–∏–º —à–∞–±–ª–æ–Ω
[tty1] $ cat handson/handson-06/deployment.yml
## –∑–∞–ø–æ–ª–Ω—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â—É—é —Å–µ–∫—Ü–∏—é
[tty1] $ vi handson/handson-06/deployment.yml
[tty1] $ kubectl apply -f handson/handson-06/deployment.yml
# –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
[tty0] $ watch -e -n0.1 curl --fail --show-error -s -i app-butter-ingress.&lt;namespace-name&gt;.lb.&lt;cluster-name&gt;.k8s.raiffeisen.ru
</code></pre>
<blockquote>
<p>–§–ª–∞–≥ <code>--fail</code> –∫–æ–º–∞–Ω–¥—ã curl –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É —Å –æ—à–∏–±–æ—á–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º –µ—Å–ª–∏ –±—ã–ª HTTP –æ—Ç–≤–µ—Ç –Ω–µ 200. –í –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö curl –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ–ª–∞–≥ <code>--fail-with-body</code> –∏ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ <code>--show-error</code></p>
</blockquote>
<blockquote>
<p>–§–ª–∞–≥ <code>--show-error</code> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∞—è –±—ã–ª–∞ –æ—à–∏–±–∫–∞ –≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –≤–µ—Ä–Ω—É–ª—Å—è –Ω–µ 200 —Å—Ç–∞—Ç—É—Å. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —Ç.–∫ —Ñ–ª–∞–≥ <code>--fail</code> —Å–∫—Ä—ã–≤–∞–µ—Ç –≤—ã–≤–æ–¥ –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏</p>
</blockquote>
<blockquote>
<p>–§–ª–∞–≥–∏ <code>-s</code> –∏ <code>-v</code> –∫–æ–º–∞–Ω–¥—ã curl –Ω–æ—Å—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –¥–µ–ª–∞—é—Ç –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥</p>
</blockquote>
<blockquote>
<p>–§–ª–∞–≥ <code>-e</code> –¥–ª—è –∫–æ–º–∞–Ω–¥—ã watch –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—ã –∫–æ–º–∞–Ω–¥—ã –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –æ—à–∏–±–∫–æ–π</p>
</blockquote>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –¥–ª—è deployment app-butter-deployment –Ω–∞ 3 —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã <code>kubectl scale</code> –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –Ω–∞—à–µ–≥–æ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞</p>
<blockquote>
<p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π <code>watch -e -n0.1 curl --fail --show-error -s -i app-butter-ingress.&lt;namespace-name&gt;.lb.&lt;cluster-name&gt;.k8s.raiffeisen.ru</code></p>
</blockquote>
<p><strong>Then</strong> —Ç–µ—Å—Ç —É–ø–∞–ª –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–ø–ª–∏–∫ –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –≤–µ—Ä–Ω—É–ª HTTP 500</p>
<ol>
<li>–ü–æ—á–µ–º—É —É–ø–∞–ª —Ç–µ—Å—Ç? –†–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –ø—Ä–æ–±–ª–µ–º—ã</li>
<li>–£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</li>
<li>–ö–∞–∫ —É–∑–Ω–∞—Ç—å –≤ –∫–∞–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ø–∞–ª –∑–∞–ø—Ä–æ—Å?</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Å—Ä–∞–∑—É —Å–æ –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤?</li>
<li>–ö–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∏–Ω—Å—Ç–∞–Ω—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?</li>
<li>–í –∫–∞–∫–æ–π –º–æ–º–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ curl?</li>
<li>–ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, –∫–∞–∫–æ–π –≤–∏–¥ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ app-butter –∏–∑ app-knife?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –Ω–∞ –∫–∞–∫–∏—Ö —É–∑–ª–∞—Ö –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤—ã–≤–µ–¥–∏—Ç–µ –µ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∏–º—è/—É–∑–µ–ª</li>
</ol>
<h2 id="k8s-application-probes-and-full-deployments">K8S Application Probes and full deployments<a aria-hidden="true" tabindex="-1" href="#k8s-application-probes-and-full-deployments"><span class="icon icon-link"></span></a></h2>
<ol>
<li>liveness and readiness probess</li>
<li>Application access model</li>
<li>LB probes and application availability for user corner cases</li>
<li>K8S Deploments</li>
</ol>
<p>üõí <em>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</em></p>
<ol>
<li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/">Kubernetes probes</a></li>
</ol>
<h2 id="hands-on-practice-quest-07-redeploy-application-with-probes">Hands-on practice quest #07: Redeploy application with probes<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-07-redeploy-application-with-probes"><span class="icon icon-link"></span></a></h2>
<p>–ü—ã—Ç–∞–µ–º—Å—è –º–∏—Ç–∏–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ K8S</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong> –¥–æ–±–∏—Ç—å—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±</p>
<p>üëÄ <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/">Kubernetes probes</a></p>
<p>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ rediness/liveness –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –Ω–µ—Ç</p>
<pre><code class="language-shell">[tty0] $ watch -e -n0.1 curl --fail --show-error -s -i app-butter-ingress.&lt;namespace-name&gt;.lb.&lt;cluster-name&gt;.k8s.raiffeisen.ru

[tty1] $ kubectl edit deployment app-butter-deployment
[tty1] $ kubectl apply -f deployment.yml
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ë—É–¥—É—Ç –ª–∏ –¥–æ—Ö–æ–¥–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ—Å–ª–∏ livenessProbe –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞ –∞ readinessProbe –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞?</li>
<li>–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ —Ç–æ–ª—å–∫–æ readiness –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã app-butter?</li>
<li>–í –∫–∞–∫–æ–º —Å–ª—É—á–∞–µ –Ω–µ–ª—å–∑—è –±–µ–∑ <code>startupProbe</code>?</li>
<li>–ö–∞–∫ —Å–≤—è–∑–∞–Ω—ã <code>startupProbe</code> –∏ <code>livenessProbe</code>, <code>readinessProbe</code>?</li>
<li>–ú–æ–∂–Ω–æ –ª–∏ –ø–æ–π–º–∞—Ç—å —Ç–∞–∫–æ–π –∂–µ —ç—Ñ—Ñ–µ–∫—Ç –∫–∞–∫ 500 –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, –Ω–æ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?</li>
<li>–î–æ—Ö–æ–¥—è—Ç –ª–∏ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ Service –µ—Å–ª–∏ Pod –≤ —Å—Ç–∞—Ç—É—Å–µ Terminating?</li>
</ol>
<h2 id="hands-on-practice-quest-71-edit-deployment">Hands-on practice quest #7.1: Edit deployment<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-71-edit-deployment"><span class="icon icon-link"></span></a></h2>
<p>–†–∞–∑–±–∏—Ä–∞–µ–º—Å—è —Å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ —Ä–∞–±–æ—Ç—ã Pod —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Deployment*</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong> –ø–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å <code>ReplicaSet</code></p>
<p>–ò–∑–º–µ–Ω–∏–º <code>metadata.labels.app</code> –Ω–∞ <code>app-butter-edited</code></p>
<pre><code class="language-shell">[tty0] $ kubectl get replicasets -w
[tty1] $ kubectl edit pod app-butter-&lt;custom-id-autocomplete-it&gt;
[tty1] $ kubectl get pods
</code></pre>
<p>–í–µ—Ä–Ω—ë–º –æ–±—Ä–∞—Ç–Ω–æ metadata.labels.app</p>
<pre><code class="language-shell">kubectl edit pod app-butter-&lt;&gt;
kubectl get pods
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å–æ —Å—Ç–∞—Ä—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ labels?</li>
<li>–û–±—ä—è—Å–Ω–∏—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ ReplicaSet?</li>
<li>–ö–∞–∫ –ø–æ–Ω—è—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω –ª–∏ –æ–Ω –∫ Deployment?</li>
<li>–ë—É–¥–µ—Ç –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å replica set?</li>
<li>–ö–∞–∫ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –ø–æ–¥—ã?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –í –∫–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è <code>CURRENT</code> –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ <code>kubectl get rs</code>, –Ω–∞–∑–æ–≤–∏—Ç–µ —Ö–æ—Ç—è –±—ã –¥–≤–µ –∏ –ø–æ—è—Å–Ω–∏—Ç–µ –∫–∞–∫–∏–µ –∏–∑ –Ω–∏—Ö –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–∞–ª—å–Ω—ã –≤ –≤–∞—à–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö</li>
</ol>
<h2 id="k8s-deployment-rollout">K8S Deployment rollout<a aria-hidden="true" tabindex="-1" href="#k8s-deployment-rollout"><span class="icon icon-link"></span></a></h2>
<ol>
<li>–û—Ç–ª–∏—á–∏—è Deployment –æ—Ç ReplicaSet –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</li>
<li>kubectl rollout undo demo</li>
</ol>
<h2 id="hands-on-practice-quest-072-deployment-rollout">Hands-on practice quest #07.2: deployment rollout<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-072-deployment-rollout"><span class="icon icon-link"></span></a></h2>
<p>–ò—Å—Å–ª–µ–¥—É–µ–º –º–µ—Ö–∞–Ω–∏–∑–º—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–∫–∞—Ç–∞ —Ä–µ–≤–∏–∑–∏–π –≤ K8S</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong> –ø–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã –æ—Ç–∫–∞—Ç–∞ <code>Deployment</code></p>
<p>–ò–∑–º–µ–Ω–∏–º metadata.labels.app</p>
<pre><code class="language-shell">[tty0] $ kubectl get rs -w # rs = replicaset
[tty1] $ kubectl rollout history deployment app-butter-deployment
[tty1] $ kubectl rollout undo deployment app-butter-deployment --to-revision=&lt;revision-number&gt;
[tty1] $ kubectl get deployment app-butter-deployment -o yaml
[tty1] $ kubectl get rs
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ —É–∂–µ –æ—Ç–∫–∞—á–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é (–ø–æ—Å–ª–µ–¥–Ω—é—é)?</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ deployments –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ?</li>
<li>–ò–∑–º–µ–Ω–∏—Ç—Å—è –ª–∏ –≤–µ—Ä—Å–∏—è deployment –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –Ω–∏–º <code>ReplicaSet</code>? –ê –µ—Å–ª–∏ Pod?</li>
<li>–ü–æ—á–µ–º—É –≤ —Å–ø–∏—Å–∫–µ <code>ReplicaSet</code> –µ—Å—Ç—å –∫–∞–∫–∏–µ —Ç–æ –ø—É—Å—Ç—ã–µ? –û–±—ä—è—Å–Ω–∏—Ç–µ –∑–∞—á–µ–º –æ–Ω–∏</li>
</ol>
<h2 id="k8s-multi-path-applications">K8S Multi path applications<a aria-hidden="true" tabindex="-1" href="#k8s-multi-path-applications"><span class="icon icon-link"></span></a></h2>
<ol>
<li>Basic Reverse proxy concepts</li>
<li>Ingress rules - rewrite, split locations, certs</li>
</ol>
<p>üõí <em>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</em></p>
<ol>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">Nginx ingress docs</a></li>
<li><a href="https://kubernetes.github.io/ingress-nginx/user-guide/ingress-path-matching/">Nginx ingress path mapping</a></li>
<li><a href="https://kinsta.com/blog/reverse-proxy/">Reverse proxy - HowTo</a></li>
</ol>
<h2 id="hands-on-practice-quest-08-two-apps-in-one-domain">Hands-on practice quest #08: Two apps in one domain<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-08-two-apps-in-one-domain"><span class="icon icon-link"></span></a></h2>
<p>–ò–∑—É—á–∞–µ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—É—é —Å—Ö–µ–º—É.
–ü–æ–¥—ã–º–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ Reverse Proxy –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π ingress, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ</p>
<p>üëÄ <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">Nginx ingress docs</a><br/>
<!-- -->üëÄ <a href="https://kubernetes.github.io/ingress-nginx/user-guide/ingress-path-matching/">Nginx ingress path mapping</a><br/>
<!-- -->üëÄ <a href="https://kubernetes.github.io/ingress-nginx/examples/rewrite/">Nginx ingress rewrite</a><br/>
<!-- -->üëÄ <a href="https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/#x-forwarded-prefix-header">Nginx ingress forwarded prefix header</a><br/>
<!-- -->üëÄ <a href="https://tomgregory.com/spring-boot-behind-load-balancer-using-x-forwarded-headers/">–ü—Ä–æ Reverse Proxy —Å X-Forwarder-* –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Spring</a></p>
<pre><code class="language-shell"># –¢–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å
[tty0] $ watch -n0.5 curl -s -i training-app.&lt;namespace-name&gt;.lb.&lt;cluster-name&gt;.k8s.raiffeisen.ru/app-knife/
# or
[tty0] $ watch -n0.5 curl -s -i training-app.&lt;namespace-name&gt;.lb.&lt;cluster-name&gt;.k8s.raiffeisen.ru/app-butter/

[tty1] $ kubectl explain ingress.spec.rules.http.paths
# –í—ã–Ω–æ—Å–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–Ω—ã–µ –ø—É—Ç–∏ –æ–¥–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
[tty1] $ vi ingress.yml
[tty1] $ kubectl apply -f ingress.yml
</code></pre>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π <code>app-butter</code></p>
<ol>
<li>–ö–∞–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –ø–æ–¥–æ–≤ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞?</li>
<li>–ö–∞–∫ –µ—â—ë –º–æ–∂–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á—Ç–æ–±—ã –≤—ã–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏ –≥—Ä—É–ø–ø—ã –ø–æ–¥–æ–≤?</li>
</ol>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ü—Ä–æ–±–æ–≤–∞–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å UI? –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω—É–∂–Ω–æ?</li>
<li>–ö–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –ø—É—Ç—è–º–∏? (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞)</li>
<li>–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞?</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤(–ø–æ–¥–æ–≤) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?</li>
<li>–∫–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ —Å–µ–π—á–∞—Å –µ—Å—Ç—å &quot;–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏&quot; –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ?</li>
<li>–ü–æ –∫–∞–∫–æ–º—É –ø—É—Ç–∏ (HTTP PATH) –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –Ω–æ–≤–æ–≥–æ ingress?</li>
<li>–ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –ø—É—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –∞ –Ω–µ –≤—Å–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ? (–Ω–∞–ø—Ä–∏–º–µ—Ä <code>/api/butter</code> –∏ <code>/api/knife</code> —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ). –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ–±—ã –≤ —Ç–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–ª–∏ –æ–±–∞ ingress –ø—Ä–∞–≤–∏–ª–∞?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: HAL API: –∫–∞–∫ –±—ã—Ç—å —Å –æ–±—Ä–∞—Ç–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏? –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å –∫–∞–∫–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –ø—Ä–∏—à—ë–ª –∑–∞–ø—Ä–æ—Å?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –°–¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫, —á—Ç–æ–±—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏–ª url –±–µ–∑ <code>/app-knife/info</code> –∏ <code>/app-butter/info</code> - —Ç.–µ —á—Ç–æ–±—ã <code>/info</code> –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞—Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ <code>training-app</code> ingress</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –î–æ–±–∞–≤—å—Ç–µ <code>x-forwarder-prefix</code> –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è ingress <code>traingin-app</code></li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>**: –ú–æ–∂–Ω–æ –ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å TLS –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ ingress? –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–¥–µ–ª–∞—Ç—å</li>
</ol>
<h2 id="k8s-configmaps">K8S ConfigMaps<a aria-hidden="true" tabindex="-1" href="#k8s-configmaps"><span class="icon icon-link"></span></a></h2>
<ol>
<li>DNS TTL –∏ –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ maintenance –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</li>
<li>–õ–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ DNS Discovery</li>
<li>K8S Config maps - –ß—Ç–æ —ç—Ç–æ –∏ –≥–¥–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞ –≥–¥–µ –Ω–µ—Ç</li>
<li>* –ü–æ–¥—Ä–æ–±–Ω–æ Forwarded RFC + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è</li>
</ol>
<p>üõí <em>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</em></p>
<ol>
<li><a href="https://kubernetes.io/docs/concepts/configuration/configmap/">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ ConfigMap</a></li>
<li><a href="https://en.wikipedia.org/wiki/Environment_variable">–ü—Ä–æ Shell ENV Variables</a></li>
<li><a href="https://kubernetes.io/docs/tasks/inject-data-application/environment-variable-expose-pod-information/">Exposing information to pod</a></li>
</ol>
<h2 id="hands-on-practice-quest-09-redeploy-application-with-custom-configuration">Hands-on practice quest #09: Redeploy application with custom configuration<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-09-redeploy-application-with-custom-configuration"><span class="icon icon-link"></span></a></h2>
<p>–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –ø—ã—Ç–∞–µ–º—Å—è —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ü–æ–¥—ã–º–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ &quot;–∫–æ—Ä–æ–±–æ—á–Ω—ã—Ö&quot; –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç   app-knife-deployment –∏ app-butter-deployment –≤ —Å–≤–æ—ë–º namespace<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –í—ã–Ω–µ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ (<code>CALL_HOST</code>) –∏ —Ç–∞–π–º–∞—É—Ç–∞ app-butter (<code>CALL_TIMEOUT</code>) –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–π —Å–º–µ–Ω—ã</p>
<p>üëÄ <a href="https://kubernetes.io/docs/concepts/configuration/configmap/">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ ConfigMap</a></p>
<pre><code class="language-shell">kubectl explain pod.spec.containers.env 
kubectl explain configmap 
vi configmap.yml
vi deployment.yml
kubectl apply -f configmap.yml
kubectl create configmap -h 
</code></pre>
<p><strong>Then</strong> ConfigMap —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–ª—Å—è –∏ –≤—ã —É–±–µ–¥–∏–ª–∏—Å—å —á—Ç–æ –æ–Ω —Å–æ–∑–¥–∞–Ω<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–≤–µ—Å—Ç–∏ –∫–ª—é—á–∏ —Å–æ—Ö—Ä–∞–Ω–Ω—ë–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ ConfigMap</p>
<ol>
<li>–í –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ ConfigMap?</li>
<li>–ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–ª—é—á–∏ –≤ —Å–µ–∫—Ü–∏—é <code>.data</code> –∏ <code>.binaryData</code> ?</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –±—ã–ª–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –∏ –ø–æ—á–µ–º—É —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ? –ü–æ—è—Å–Ω–∏—Ç–µ</li>
</ol>
<p>üëÄ <a href="https://en.wikipedia.org/wiki/Environment_variable">–ü—Ä–æ Shell ENV Variables</a></p>
<p><strong>Then</strong> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥—Ç—è–Ω—É–ª–∏—Å—å –≤ app-knife<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –∏–∑–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é - —Å–º–µ–Ω–∏—Ç—å —Ç–∞–π–º–∞—É—Ç. –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ</p>
<ol>
<li>–ö–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ?</li>
<li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—ä—è—Å–Ω–∏—Ç—å –ø–æ—á–µ–º—É —Ç–∞–∫</li>
</ol>
<p><strong>Then</strong> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥—Ç—è–Ω—É–ª–∏—Å—å –≤ app-knife<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –¥–æ–±–∞–≤—å—Ç–µ –≤ configmap.yml –Ω–µ –ø—Ä–æ—Å—Ç–æ key-value –Ω–∞—Å—Ç—Ä–æ–π–∫—É, –∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π <code>nginx.conf</code> &quot;—Ñ–∞–π–ª&quot; (–∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∏–∂–µ). –°–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –ø–∞–ø–∫—É <code>/usr/src/app</code></p>
<pre><code class="language-plain">user       www www;
error_log  logs/error.log;

http {
  include    conf/mime.types;
  index    index.html index.htm index.php;

  server { # php/fastcgi
    listen       80;
    server_name  example.com www.example.com;
    
    location ~ \.php$ {
      fastcgi_pass   127.0.0.1:1025;
    }
  }
}
</code></pre>
<pre><code class="language-shell">kubectl explain pod.spec.volumes
kubectl explain pod.spec.containers.volumeMounts

vi configmap.yml
vi deployment.yml

kubectl apply -f configmap.yml
kubectl apply -f deployment.yml
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ö–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª–µ?</li>
<li>–í—Å–µ–≥–¥–∞ –ª–∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞?</li>
<li>–ö–∞–∫ —É–∑–Ω–∞—Ç—å –ø–æ–Ω—è—Ç—å, –±—É–¥—É—Ç –ª–∏ —Ñ–∞–π–ª–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?</li>
<li>–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–¥—Ç—è–Ω—É–ª–∏—Å—å?</li>
<li>–Ω—É–∂–µ–Ω –ª–∏ —Ä–µ—Å—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è configmap? –û–±–æ—Å–Ω—É–π—Ç–µ —Ç–∞–∫ –ª—É—á—à–µ?</li>
<li>–ú–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ env?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –î–æ–±–∞–≤—å—Ç–µ –∏–º—è –º–∞—à–∏–Ω—ã (<code>nodeName</code>) –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –ø–æ–¥ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è <code>POD_NODE_NAME</code></li>
</ol>
<p>üëÄ <a href="https://kubernetes.io/docs/tasks/inject-data-application/environment-variable-expose-pod-information/">Exposing information to pod</a></p>
<h2 id="k8s-secrets">K8S Secrets<a aria-hidden="true" tabindex="-1" href="#k8s-secrets"><span class="icon icon-link"></span></a></h2>
<ol>
<li>K8S Secrets object. Secret types and security considerations</li>
<li>Secrets best practice for Cloud Native apps</li>
<li>Required support for security from infrastructure side and app side</li>
</ol>
<p>üõí <em>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</em></p>
<ol>
<li><a href="https://kubernetes.io/docs/tasks/administer-cluster/kms-provider/">About Secret Encryption</a></li>
</ol>
<h2 id="hands-on-practice-quest-10-k8s-secrets-simple-practice">Hands-on practice quest #10: K8S Secrets simple practice<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-10-k8s-secrets-simple-practice"><span class="icon icon-link"></span></a></h2>
<p>–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ K8S, –æ–±—Å—É–∂–¥–∞–µ–º –∏—Ö –∫–æ–º–ø—Ä–æ–º–∏—Å—ã –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–ü—Ä–æ–±—É–µ–º —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Å–µ–∫—Ä–µ—Ç–æ–≤</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç <code>app-knife-deployment</code>   –∏ <code>app-butter-deployment</code> –≤ —Å–≤–æ—ë–º namespace<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: —Å–æ–∑–¥–∞—Ç—å —Å–µ–∫—Ä–µ—Ç –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—è —Å–µ–∫—Ü–∏–∏ <code>data</code> –∏ <code>stringData</code>. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ –Ω–∞–ª–∏—á–∏–µ –∏ —Ñ–æ—Ä–º–∞—Ç</p>
<pre><code class="language-shell">kubectl explain secrets
kubectl explain secrets.data
kubectl explain secrets.stringData
vi handson-10/secret.yml
kubectl apply -f handson-10/secret.yml
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è, –æ—Ç–≤–µ—á–∞—è –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:</p>
<ol>
<li>–í –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –≤ —Å–µ–∫—Ü–∏–∏ <code>data</code>?</li>
<li>–ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å &quot;–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ&quot; –¥–∞–Ω–Ω—ã–µ –≤ <code>data</code> –∏ —á—Ç–æ –±—É–¥–µ—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Ö –ø—Ä–æ—á–∏—Ç–∞—Ç—å?</li>
<li>–ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –∫–ª—é—á–∏ –≤ <code>data</code> –∏ <code>stringData</code> –ø–µ—Ä–µ—Å–µ–∫—É—Ç—Å—è?</li>
<li>–ú–æ–∂–Ω–æ –ª–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ stringData –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞ (<code>kubectl apply -f ...</code>)</li>
</ol>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã <code>username</code> –∏ <code>password</code> –≤ –ø–∞–ø–∫—É <code>/usr/src/app</code> –≤–º–µ—Å—Ç–µ —Å –∫–æ–Ω—Ñ–∏–≥–æ–º <code>nginx.conf</code> –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è</p>
<pre><code class="language-shell"># –∏–∑—É—á–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
kubectl explain pod.spec.volumes
kubectl explain pod.spec.containers.volumeMounts
kubectl explain pod.spec.containers.env 
kubectl explain pod.spec.containers.env.valueFrom.secretKeyRef

# –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–∫—Ä–µ—Ç—ã –≤ –Ω–∞—à–∏ –ø–æ–¥—ã 
vi handson-10/deployment.yml
kubectl apply -f handson-10/deployment.yml
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–∫–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ <code>username</code> –∏ <code>password</code> —Å–µ–∫—Ä–µ—Ç–∞ <code>the-secret-of-tasty-sandwich</code>? –ö–∞–∫–æ–µ –æ–Ω–æ –∏ –ø–æ—á–µ–º—É?</li>
<li>–º–æ–∂–Ω–æ –ª–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç?</li>
<li>—á–µ–º —Å–µ–∫—Ä–µ—Ç –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç ConfigMap</li>
<li>–±–µ–∑–æ–ø–∞—Å–µ–Ω –ª–∏ —Ç–∞–∫–æ–π —Å–µ–∫—Ä–µ—Ç?</li>
<li>—á–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è —Å–µ–∫—Ü–∏–∏ data –∏ stringData?</li>
<li>—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ–±—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —Å–µ–∫—Ä–µ—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏?</li>
<li>–ø–æ–º–Ω–∏—Ç–µ –≥–¥–µ –º—ã —É–∂–µ —Å—Ç–∞–ª–∫–∏–≤–∞–ª–∏—Å—å —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏?</li>
<li>—á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å <code>secrets</code> –∏ <code>configmaps</code> –≤–æ –æ–¥–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é?</li>
</ol>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: —Å–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç <code>nginx.conf</code> –∏ –ª—é–±–æ–µ –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π –≤ <code>ConfigMap</code> –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é - <code>/usr/src/app</code>s</p>
<pre><code class="language-shell"># –∏–∑—É—á–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
kubectl explain pod.spec.containers.volumeMounts.subPath
kubectl explain pod.spec.volumes.secret.items
kubectl explain pod.spec.volumes.configMap.items

vi handson-10/deployment.yml
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ö–∞–∫–∏–µ –≤–æ–∑–Ω–∏–∫–ª–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏?</li>
<li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—ä—è—Å–Ω–∏—Ç—å –ø–æ—á–µ–º—É —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ?</li>
<li>–ö–∞–∫ –±—ã —Å–¥–µ–ª–∞–ª–∏ –≤—ã?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–µ–∫—Ä–µ—Ç –¥—Ä—É–≥–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏</li>
</ol>
<pre><code class="language-shell">kubectl create secret generic secret_name \

# –î–∞–ª–µ–µ —á–µ—Ç—ã—Ä–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞ –∏–∑ —Ñ–∞–π–ª–∞
1. --from-file=secret.txt \ 
2. --from-file=key=secret.txt \ 
3. --from-literal=key=value
4. --from-env-file=.env
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –ø–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–º—É –∑–∞–¥–∞–Ω–∏—é</p>
<ol>
<li>–í —á—ë–º –æ—Ç–ª–∏—á–∏–µ —Ç–∏–ø–∞ —É regcred –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞? –ö–∞–∫ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –≤–∞—à –ø–∞—Ä–æ–ª—å?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ö–æ–≥–¥–∞ —Ç–∞–∫–æ–π —Å–ø–æ—Å–æ–± –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–æ–±–µ–Ω?</li>
<li><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–π—Ç–∏ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å –∏–∑ —Å–µ–∫—Ä–µ—Ç–∞ regcred ( —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –≤ <a href="#hands-on-practice-quest-02-i-have-an-application-i-wish-deploy-it-to-production">–∑–∞–¥–∞–Ω–∏–∏ 02</a> )</li>
</ol>
<h2 id="k8s-apps-distribution">K8S Apps Distribution<a aria-hidden="true" tabindex="-1" href="#k8s-apps-distribution"><span class="icon icon-link"></span></a></h2>
<ol>
<li>Manage application topology</li>
<li>Taints and Tolerations</li>
<li>Topology keys</li>
<li>Disruption Budget</li>
<li>Node maintenance</li>
</ol>
<p>üõí <em>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</em></p>
<ol>
<li><a href="https://kubernetes.io/docs/setup/best-practices/cluster-large/">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è</a></li>
<li><a href="https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ Affinity –∏ —Å–ø–æ—Å–æ–±—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Pod</a></li>
</ol>
<h2 id="hands-on-practice-quest-11-reconfigure-apps-distribution">Hands-on practice quest #11: Reconfigure apps distribution<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-11-reconfigure-apps-distribution"><span class="icon icon-link"></span></a></h2>
<p>–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å —Ç–µ—Ö–Ω–∏–∫–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º Pod –ø–æ Node –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ K8S. –ü–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–¥—ã –Ω–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç <code>app-knife-deployment</code>   –∏ <code>app-butter-deployment</code> –≤ —Å–≤–æ—ë–º namespace<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥—ã —Ç–æ–ª—å–∫–æ –≤ –¥–≤—É—Ö –∑–æ–Ω–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö. üëÄ <em>–£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –¥–æ 10, —á—Ç–æ–±—ã –±—ã–ª–æ –±–æ–ª–µ–µ –Ω–∞–≥–ª—è–¥–Ω–æ</em></p>
<blockquote>
<p>–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –æ–±—ä–µ–∫—Ç–∞ limitranges (—Å–æ–∑–¥–∞–≤–∞–ª—Å—è –≤ –∑–∞–¥–∞–Ω–∏–µ #03). üëÄ <a href="https://kubernetes.io/docs/setup/best-practices/cluster-large/">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è</a>
–ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç, —Ç–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª <code>handson/handson-03/default-limits.yml</code> –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –≤ 20Mi.
–ü–æ—Å–ª–µ —á–µ–≥–æ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –µ–≥–æ –µ—Å–ª–∏ –Ω–µ—Ç —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:
<code>kubectl apply -f handson/handson-03/default-limits.yml</code>.
‚ö†Ô∏è –≠—Ç–æ –º–µ—Ä–∞ –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –Ω–µ —Å–∫—É—à–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–ø–ª–∏–∫</p>
</blockquote>
<pre><code class="language-shell">kubectl edit deployment app-knife-deployment
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–í—Å—ë –ª–∏ —Ö–æ—Ä–æ—à–æ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏?</li>
<li>–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–æ–Ω—ã?</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–≤–∞–ª–∏–≤—à–∏–µ—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?</li>
<li>–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –Ω–æ–¥—ã –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–ø—É—â–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <code>app-knife</code>?</li>
<li>–ö–∞–∫ –∑–∞–¥–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –ø–æ–¥—ã, –Ω–æ –∏ –æ–±—â–∏–π –ª–∏–º–∏—Ç –Ω–∞ –≤–µ—Å—å –Ω–∞—à –Ω–µ–π–º—Å–ø–µ–π—Å?</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–ª–∞—Å—Ç–µ—Ä–∞?</li>
</ol>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥—ã –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö –∫—Ä–æ–º–µ –æ–¥–Ω–æ–≥–æ. <strong>nodeAffinity –ø—Ä–∞–∫—Ç–∏–∫–∞</strong></p>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ü–æ–¥—É–º–∞–π—Ç–µ, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π? –ù–∞ —á—Ç–æ —ç—Ç–æ –ø–æ—Ö–æ–∂–µ –∏–∑ –≤–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?</li>
<li>–ö–∞–∫—É—é —Ä–æ–ª—å –∏–≥—Ä–∞–µ—Ç <code>topologyKey</code> –¥–ª—è <code>requiredDuringSchedulingIgnoredDuringExecution</code>?</li>
<li>–ú–æ–∂–Ω–æ –ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã app-knife –¥–µ–ø–ª–æ–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ —É–∑–ª—ã –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç app-butter?</li>
<li>–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è anti affinity –ø—Ä–∞–≤–∏–ª–∞?</li>
</ol>
<blockquote>
<p><a href="https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ Affinity –∏ —Å–ø–æ—Å–æ–±—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Pod</a></p>
</blockquote>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥—ã —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ –æ–∫–∞–∑–∞–ª–æ—Å—å –ø–æ –æ–¥–Ω–æ–º—É <code>app-knife</code> –∏ <code>app-butter</code>.  <strong>podAffinity/podAntyAffinity –ø—Ä–∞–∫—Ç–∏–∫–∞</strong><br/>
<strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–ö–∞–∫–∏–µ –µ—â—ë –º–æ–≥—É—Ç –±—ã—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?</li>
<li>–û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –ª–µ–π–±–ª—ã –≤–∏–¥–∞ - <code>kubernetes.io/hostname</code>? –û–Ω–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ?</li>
<li>–ö–∞–∫ –±—ã –≤—ã –Ω–∞–∑—ã–≤–∞–ª–∏ —Å–≤–æ–∏ –ª–µ–π–±–ª—ã –≤ –∫–æ–º–ø–∞–Ω–∏–∏? –ü–æ—è—Å–Ω–∏—Ç–µ –ø–æ—á–µ–º—É</li>
<li>–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É–∑–ª–∞?</li>
</ol>
<p><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –∑–æ–Ω—ã –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–ø—É—â–µ–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è <code>app-knife</code>?</p>
<pre><code class="language-shell">kubectl edit deployment app-knife-deployment
</code></pre>
<p><strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>*: –ò–∑—É—á–∏—Ç–µ –æ–±—ä–µ–∫—Ç <code>ResourceQuotas</code> –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å?<br/>
<strong>–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ</strong>**: –ò–∑—É—á–∏—Ç–µ –æ–±—ä–µ–∫—Ç <code>PodDisruptionBudget</code> –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å?</p>
<pre><code class="language-shell">kubectl explain resourcequota
vi handson/handson-12/resourcequota.yml
#...
</code></pre>
<h2 id="k8s-jobs-management-and-workload-distribution">K8S Jobs Management and workload distribution<a aria-hidden="true" tabindex="-1" href="#k8s-jobs-management-and-workload-distribution"><span class="icon icon-link"></span></a></h2>
<ol>
<li>Jobs Scheduling –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –≤–∏–¥—ã –∑–∞–ø—É—Å–∫–∞</li>
<li>DaemonSets, CronJobs</li>
<li>High Level –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã. Argo workflow etc.</li>
<li>–î–µ–º–æ –∑–∞–ø—É—Å–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ jobs</li>
</ol>
<h2 id="hands-on-practice-quest-12-practice-with-daemonset-and-cronjob">Hands-on practice quest #12: Practice with DaemonSet and CronJob<a aria-hidden="true" tabindex="-1" href="#hands-on-practice-quest-12-practice-with-daemonset-and-cronjob"><span class="icon icon-link"></span></a></h2>
<p>–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å –Ω–æ–≤—ã–º–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è–º–∏ K8S –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤—ã—Ö –≤–∏–¥–æ–≤ —Ä–∞–±–æ—Ç</p>
<p><strong>Given</strong> –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress –∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∑–∞–¥–∞–Ω–∏—è<br/>
<strong>When</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –ø–µ—Ä–µ–¥–µ–ª–∞–π—Ç–µ app-knife <code>deployment</code> –≤ <code>daemonset</code>. –í–æ–∑—å–º–∏—Ç–µ –∑–∞ –æ—Å–Ω–æ–≤—É —Ç—É –≤–µ—Ä—Å–∏—é –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞</p>
<p>üëÄ –≠—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –ë–µ–∑ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞</p>
<pre><code class="language-shell">kubectl explain daemonset
vi handson/handson-12/deployment.yml
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>
<p>–ú–æ–∂–µ—Ç –ª–∏ daemonSet <code>selector.matchLabels</code> –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à–∏ —Å—Ç–∞—Ä—ã–µ –ø–æ–¥—ã –∏–∑ deployment?</p>
</li>
<li>
<p>–ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, –¥–ª—è —á–µ–≥–æ —Ç–∞–∫ —Å–¥–µ–ª–∞–Ω–æ?</p>
</li>
<li>
<p>–ß—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –∑–∞–ø—É—Å–∫–∞—Ç—å —Å –ø–æ–º–æ—â—å—é daemonset ?</p>
</li>
<li>
<p>–ó–∞–¥–∞–Ω–∏–µ: –∑–∞–ø—É—Å—Ç–∏—Ç–µ cronjob –∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–µ—á–∞—Ç–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Å–æ–ª—å</p>
</li>
</ol>
<p>üëÄ –≠—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –ë–µ–∑ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞</p>
<pre><code class="language-shell">kubectl explain cronjob
vi handson/handson-12/deployment.yml
</code></pre>
<p><strong>Then</strong> —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</p>
<ol>
<li>–∫–∞–∫ —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ Job ?</li>
<li>—á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ Job –µ—â—ë –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è, –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é? –ö–∞–∫ —ç—Ç–∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å?</li>
<li>–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ —Ç–æ —á–µ—Ä–µ–∑ 24—á–∞—Å–∞ —É –º–µ–Ω—è –±—É–¥–µ—Ç –±–æ–ª—å—à–µ 17_000 –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö Job? –ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ?</li>
<li>–º–æ–∂–µ—Ç –ª–∏ CronJob –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–Ω–æ–≥–æ Job –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ? (<code>kubectl explain cronjob.spec.startingDeadlineSeconds</code>)</li>
<li>–∞ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫?</li>
</ol>
<p>üëÄ <a href="https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/#cron-job-limitations">–ü—Ä–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã CronJob</a></p>
<h2 id="k8s-base-homework">K8S Base Homework<a aria-hidden="true" tabindex="-1" href="#k8s-base-homework"><span class="icon icon-link"></span></a></h2>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –° –ø–æ–º–æ—â—å—é –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Ä–∞–Ω–µ–µ –∑–Ω–∞–Ω–∏–π —Ä–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å —Å NetworkPolicies —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ<br/>
<strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –Ω–∞–π–¥–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ NetworkPolicies –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –≤ –≤–∞—à–µ–º –Ω–µ–π–º—Å–ø–µ–π—Å–µ. –ü—Ä–æ–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:</p>
<ul>
<li>—á—Ç–æ —Ç–∞–º –∑–∞ ip?</li>
<li>—á—Ç–æ —Ç–∞–º –∑–∞ ip?</li>
<li>—á—Ç–æ —ç—Ç–æ –∑–∞ –ø–æ–¥—Å–µ—Ç–∏?</li>
<li>—á—Ç–æ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è?</li>
<li>—á—Ç–æ –∑–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è?</li>
</ul>
<p><strong>–ó–∞–¥–∞–Ω–∏–µ</strong>: –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è <em>app-knife</em> –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é <em>app-butter</em></p>
<ul>
<li>–° –ø–æ–º–æ—â—å—é —á–µ–≥–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ?</li>
<li>–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ª–∏ —á—Ç–æ –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö –∑–∞–ø—Ä–æ—Å—ã –æ—Ç <em>app-knife</em> –∫ <em>app-butter</em> –±—É–¥—É—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã?</li>
</ul></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"name":null,"docker_repository_url":"my_company_repo_url","content":"\nIntro to Kubernetes\n===================\n8-12 —á–∞—Å–æ–≤, 2-3 –∞–∫. –¥–Ω—è.\n\nPrerequisites\n=============\n\n1. RAM ‚â• 8Gb\n1. [–ü—Ä–æ–π–¥–µ–Ω—ã–Ω–µ –∑–∞–¥–∞–Ω–∏–µ —Å —Ç—Ä–µ–Ω–∏–≥–∞ –ø–æ Docker](#link-to-docker-part)\n1. [–†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –∫–ª–∞—Å—Ç–µ—Ä k8s –Ω–∞ –ø–∞—Ä—É](#link-to-confluence)\n1. terminal\n1. kubectl cli\n\nCore - Program\n==============\n–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å –æ—Å–Ω–æ–≤–∞–º–∏ —Ä–∞–±–æ—Ç—ã K8S \n–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≤—ã–∫–æ–≤ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.\n–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ —Å–æ—Ñ—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞. \n\n- —á—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ K8S\n- —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ\n- —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è K8S –∏ –ø–æ–¥—Ö–æ–¥—ã –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π\n- –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç K8S\n\n–í–≤–µ–¥–µ–Ω–∏–µ –≤ K8S\n-----------------\n\n1. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω K8S? –§—É–Ω–∫—Ü–∏–∏ –∏ –∑–∞—á–µ–º –Ω–∞–º –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è.\n1. –ü—Ä–æ—Ü–µ—Å—Å –û–° \"–Ω–∞ —Å—Ç–µ—Ä–æ–∏–¥–∞—Ö\": –≤ —á—ë–º –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞, —á—Ç–æ K8S –¥–µ–ª–∞–µ—Ç –∑–∞ –º–µ–Ω—è?\n1. –ú–µ—Ç–∞—Ñ–æ—Ä–∞ –º–æ—Ä—Å–∫–æ–≥–æ –ø–æ—Ä—Ç–∞\n1. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–µ–ª K8S –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–∏—Ç–∏—è\n1. –ü–∞—Ä–∞–¥–∏–≥–º–∞ Cloud Native (DevOps+CI/CD+Microservices+Containers) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–æ—Ç—Å—ã–ª–∫–∏ –∫ —Ç—Ä–µ–Ω–∏–Ω–≥—É –ø–æ Docker –∏ 12\n  factor apps)\n1. K8S –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - Capabilities (Self-Service, API-Driven, Elastic)\n1. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å —á–µ–º –º—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —ç—Ç–æ–º —Ç—Ä–µ–Ω–∏–Ω–≥–µ\n    - `ssh`\n    - `kubectl`\n    - linux shell (`bash` or `zsh`)\n    - `curl`\n    - `watch`\n    - `nslookup/dig`\n1. **–î–µ–º–æ**. CLI –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª–∞—Å—Ç–µ—Ä—É\n\nHands-on practice quest #00: requisites check and compatibility check\n---------------------------------------------------------------------\n–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–∞–±–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã\n* –Ω–∞–ª–∏—á–∏–µ kubectl - —Å –Ω–∏–º –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–∏ –≤—Å–µ–≥–æ –∫—É—Ä—Å–∞, –Ω–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç\n* [optional] docker - –Ω—É–∂–µ–Ω/–ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∫–∏ –¥–µ–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è —ç–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–∞—Ä—É—á–Ω–æ\n\n**Given** —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –≤ —Å–∏—Å—Ç–µ–º—É —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —É—Ç–∏–ª–∏—Ç—ã.\n\u003e –° —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–æ–º–æ–∂–µ—Ç [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ RHEL –ø–æ–¥–æ–±–Ω—ã—Ö —Å–∏—Å—Ç–µ–º](HELP-1-K8S-REQUIREMENTS.md)\n\n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç –∏—Ö –≤—ã–≤–æ–¥ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ\n\n```shell script\nkubectl\n\n# optional. Need for rebuild demo apps\n#docker version\n# optional. Need for configure secrets from docker config istead of raw secret creation\n#docker login {{dockerRepository}}\n```\n\n```shell script\n# –≤—ã–≤–µ–¥–µ–º \"—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é\" –¥–ª—è –∞–≤—Ç–æ –∫–æ–º–ø–ª–∏—Ç–∞\nkubectl completion bash\n# –ø—Ä–∏–º–µ–Ω–∏–º –µ—ë\nsource \u003c(kubectl completion bash)\n```\n\n```shell script\nls -la ~/.kube\nkubectl cluster-info\n```\n\n```shell script\ngit clone https://gitlabci.raiffeisen.ru/container-trainings/training-k8s\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –≤–æ–∑–Ω–∏–∫—à–∏–º–∏ –∏ —Ä–µ—à–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã\n- –ö–∞–∫–∞—è –≤–µ—Ä—Å–∏—è kubernetes –∫–ª–∞—Å—Ç–µ—Ä–∞ —É –≤–∞—Å?\n- –ö–∞–∫–∞—è –≤–µ—Ä—Å–∏—è kubectl –Ω—É–∂–Ω–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞?\n- –ö–∞–∫–∏–µ –≤–µ—Ä—Å–∏–∏ kubectl —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –∫–∞–∫–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞?\n- –û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è –ø–∞–ø–∫–∞ `~/.kube` ?\n- –ï—Å—Ç—å –ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –∫–∞–∫–æ–π –æ–±–æ–ª–æ—á–∫–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã? BASH/ZSH/FISH/ETC\n- **–ó–∞–¥–∞–Ω–∏–µ**\\*: –ù–∞–ø–∏—Å–∞—Ç—å config –¥–ª—è kubernetes —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏ - prod/dev (—Å–º–æ—Ç—Ä—è—Ç –Ω–∞ —Ä–∞–∑–Ω—ã–µ namespace –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ. dev - –≤–∞—à –Ω–µ–π–º—Å–ø–µ–π—Å. prod - –Ω–µ–π–º—Å–ø–µ–π—Å osttok)\n- [Enable kubectl completion howto](https://kubernetes.io/docs/tasks/tools/included/optional-kubectl-configs-bash-linux/#enable-kubectl-autocompletion)\n\nK8S Authentication\n------------------\n1. K8S _–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏_ - PKS/TKGI/Cloud\n1. –ö–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏? CLI or GUI ?\n1. kubectl CLI –∏ –º–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤. –ö–∞–∫ –ø–æ–Ω—è—Ç—å –≥–¥–µ —Å–µ–±—è –æ–±—Å–ª—É–∂–∏—Ç—å\n1. kubectl config get-contexts\n1. tkgi cli\n\nHands-on practice quest #01: connect to existed cluster\n-------------------------------------------------------\n–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–ª–∞—Å—Ç–µ—Ä—É K8S\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞  \n**–ó–∞–¥–∞—á–∞**: —É–∑–Ω–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ\n\n```shell script\nkubectl config -h\ncat ~/.kube/config\n```\n\n```shell script\nkubectl config view\n```\n\n```shell script\nkubectl config get-contexts\n```\n\n```shell script\nkubectl config use-context \\tab\nkubectl auth can-i --list \n```\nüëÄ [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –ø—Ä–∞–≤–∞ –∏ RBAC](https://kubernetes.io/docs/reference/access-authn-authz/rbac/#role-binding-examples)\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –≤–æ–∑–Ω–∏–∫—à–∏–º–∏ –∏ —Ä–µ—à–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã\n1. –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞?\n1. –ö–∞–∫ —è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤—ã–≤–∞—é—Å—å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ?\n1. –ö—Ç–æ –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –≤ —á—ë–º –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è \"–ø–µ—Ä–µ–¥–∞—á–∞\"?\n1. –ú–æ–∂–Ω–æ –ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ kubernetes —Å –ø–æ–º–æ—â—å—é Ouath 2.0/OIDC —Ç.–µ —á–µ—Ä–µ–∑ \"–°–æ—Ü—Å–µ—Ç–æ—á–∫–∏\"?\n1. –ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä—ã –±–µ–∑ use-context?\n1. –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –Ω–µ –Ω–∞ \"—Ç–µ—Ö\" –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö?\n1. –ö–∞–∫ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã —Ä–µ—Å—É—Ä—Å—ã –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤–æ –¥–Ω–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ?\n1. –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å —Å–≤–æ–π namespace –ø–æ–ª —É–º–æ–ª—á–∞–Ω–∏—é?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –¥—Ä—É–≥–∏–º `namespace`\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `KUBECONFIG`. –ß—Ç–æ –±—É–¥–µ—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏ –ø—Ä–∏ –≤—ã–≤–æ–¥–µ `kubectl config view`? [–û KUBECONFIG](https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/)\n\n## K8S Concepts\n\n1. Declarative vs Imperative\n1. Control loop (Observe, Orient, Decide, Act) Jonh Boyd\n1. Reconciliation\n1. Real control loop examples by kubectl - Desired state vs Current stats (Observe, diff ,act Control model)\n1. Kubernetes API-Server and OpenAPI\n\nüõí *–ú–∞—Ç–µ—Ä–∏–∞–ª—ã*\n1. [–ù–∞—Å—Ç—Ä–æ–∫–π–∫–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ docker-registry k8s](https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/)\n1. [K8S –∏ Private Registry](https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/)\n1. [K8S LimitRanges](https://kubernetes.io/docs/concepts/policy/limit-range/)\n\n\n### Hands-on practice quest #02: I have an application, I wish deploy it to production!\n–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å –±–∞–∑–æ–≤—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ kubectl - –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Å—Ç–µ–π—à—É—é —Ä–∞–±–æ—Ç—É –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –∏ –ª–æ–≤–∏–º —Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ—à–µ–¥—à–∏—Ö Docker —Ç—Ä–µ–Ω–∏–Ω–≥  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –¥–µ–ø–ª–æ—è—Ç –≤ –∫–ª–∞—Å—Ç–µ—Ä\n```shell script\nkubectl create job test --image=busybox -- echo \"Hello World\"\n```\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –ü–æ–Ω—è—Ç—å —Å—Ä–∞–±–æ—Ç–∞–ª–∞ –ª–∏ –Ω–∞—à–∞ –∑–∞–¥–∞—á–∞\n1. –ü–æ—á–µ–º—É –Ω–µ –≤—ã–≤–µ–ª–∏—Å—å –ª–æ–≥–∏?\n1. –ü–æ—á–µ–º—É —É –ø–æ–¥–∞ —Ç–∞–∫–æ–µ —Å—Ç—Ä–∞–Ω–Ω–æ–µ –∏–º—è?\n\n```shell script\nkubectl describe pod test-\u003cid\u003e\n\nkubectl create job test --image=artifactory.raiffeisen.ru/ext-techimage-docker/busybox -- echo \"Hello World\" \n\nkubectl get pods\nkubectl get jobs\n\nkubectl logs jobs/test\nkubectl delete job test\nkubectl get pods\n```\n\n**Then**: —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –º—ã—Å–ª—è–º–∏ –∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã\n1. –≤ —á—ë–º —Ä–∞–∑–ª–∏—á–∏–µ –≤ —Å–µ–º–∞–Ω—Ç–∏–∫–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ - `kubectl get job test` –∏ `kubectl get jobs/test`? –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—ä—è—Å–Ω–∏—Ç—å\n1. —á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥—É –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤ –≤–≤–µ—Å—Ç–∏ —Ç–∞–∫ –∂–µ —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ (—á–µ—Ä–µ–∑ \\/ –∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª)?\n1. —É–¥–∞–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π pod –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è job test?\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–∑ —Å curl, dig –ø—Ä–æ—á–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –¥–µ–±–∞–≥–∞\n\n```shell script\n# –ü–æ–ø—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–∑ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—è, —Ç—Ä–µ–±—É—â–µ–≥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é\n# INFO: –ü—Ä–∏–≥–æ–¥–∏—Ç—Å—è –Ω–∞–º –≤ –±—É–¥—É—â–µ–º –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ü–µ–ª–µ–π\nkubectl run -it debug --image=artifactory.raiffeisen.ru/ext-rbru-container-community-docker/cli-tools -- /bin/sh\nkubectl get events\nkubectl create secret docker-registry regcred --docker-server=\u003cyour-registry-server\u003e --docker-username=\u003cyour-name\u003e --docker-password=\u003cyour-pword\u003e\n# \u003cyour-registry-server\u003e - –Ω–∞–ø—Ä–∏–º–µ—Ä https://artifactory.raiffeisen.ru\nkubectl explain serviceaccount.imagePullSecrets\nkubectl patch serviceaccount default -p '{\"imagePullSecrets\": [{\"name\": \"regcred\"}]}'\n\nkubectl run -it debug --image=artifactory.raiffeisen.ru/ext-rbru-container-community-docker/cli-tools -- /bin/sh\n\nkubectl get pods\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –º—ã—Å–ª—è–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –∫—É–¥–∞ –Ω—É–∂–Ω–æ –∑–∞–ø—É—à–∏—Ç—å –æ–±—Ä–∞–∑ —á—Ç–æ–±—ã kubernetes –∫–ª–∞—Å—Ç–µ—Ä –µ–≥–æ —É—Å–ø–µ—à–Ω–æ —Å–ø—É–ª–∏–ª?\n1. –∫–∞–∫–æ–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è –æ–±—Ä–∞–∑–æ–≤?\n1. —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è Job –æ—Ç Pods?\n1. –∫–æ–≥–¥–∞ —É–¥–∞–ª—è–µ—Ç—Å—è Pod —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Job?\n1. –∫—Ç–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–µ–Ω –∑–∞ —ç—Ç–æ —É–¥–∞–ª–µ–Ω–∏–µ?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ö–∞–∫ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è `regcred` —Å–µ–∫—Ä–µ—Ç–∞ –µ—Å–ª–∏ –≤—ã —É–∂–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã –≤ docker registry —á–µ—Ä–µ–∑ docker login?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `serviceaccount` –Ω–µ —á–µ—Ä–µ–∑ patch –∞ —á–µ—Ä–µ–∑ `kubectl edit`. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –æ—à–∏–±–∏—Ç—å—Å—è –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–º –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥ —Å –ª–∏–º–∏—Ç–∞–º–∏ –ø–æ –ø–∞–º—è—Ç–∏ –≤ 16mb. [About K8S Limits](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/)\n\n## K8S Container isolation\n\n1. Clusters and nodes\n1. Clusters network isolation\n1. Application in cluster resources\n1. Cluster network availability\n1. Docker run in Kubernetes and minimal configuration. Namespaces and pods fast introduction\n1. –î–µ–º–æ kubectl apply/get/describe –∏ output –º–æ–¥—ã\n\nüõí *–ú–∞—Ç–µ—Ä–∏–∞–ª—ã*\n1. [–ü–æ–¥—Ä–æ–±–Ω–æ –æ —Ä–µ—Å—É—Ä—Å–∞—Ö –∏ CGroups](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/resource_management_guide/index)\n1. [–ü—Ä–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª–∏–º–∏—Ç–æ–≤](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits)\n\n### Hands-on practice quest #03: Run apps in cluster\n–ü–æ–∑–Ω–∞—ë–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–µ) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –≤ —Å–≤—è–∑–∫–µ —Å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è–º–∏ K8S (Pod).\n–î–µ–ª–∞–µ–º —ç—Ç–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –¥–µ–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è \"–Ω–æ–∂\" –∏ \"–º–∞—Å–ª–æ\"\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –æ–ø–∏—Å—ã–≤–∞—é—Ç –ø–æ–¥—ã —Å –¥–≤—É–º—è —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –º–µ–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ kubernetes\n\n\n```shell script\ncat handson/handson-03/apps-01.yml\nkubectl apply -f handson/handson-03/apps-01.yml\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ö–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∞?\n1. –ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫—É\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ–¥–∞?\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫—É –ø–æ–ª—å–∑—É—è—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π `kubectl explain`\n\n```shell script\n# INFO: –ù–µ –∑–∞–±—ã–≤–∞–µ–º —á—Ç–æ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç\nkubectl config set-context --current --namespace=\u003c\u003e\nkubectl explain pod.spec\nkubectl edit butter-fabric\n```\n\n**Then**: —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è–º–∏ –∏ —Ä–∞–∑–±–∏—Ä–∞—é—Ç—Å—è —á—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫\n1. –ö–∞–∫–∏–µ –≤–æ–∑–Ω–∏–∫–ª–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏? –û–±—ä—è—Å–Ω–∏—Ç–µ –ø–æ—á–µ–º—É —Ç–∞–∫?\n1. –ö–∞–∫ —É–∑–Ω–∞—Ç—å —á—Ç–æ –µ—â—ë –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `kubectl explain`?\n\nüëÄ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `kubectl explain` —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É–µ—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ —Ä–µ—Å—É—Ä—Å–∞ K8S\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ\n\n```shell script\nkubectl delete -f handson/handson-03/apps-01.yml\nkubectl apply -f handson/handson-03/apps-02.yml\nkubectl explain pod.spec.containers.resources\n# add limits 8Mi –∏ cpu 200m\nkubectl edit pod app-butter\nvi handson/handson-03/apps-02.yml\nkubectl apply -f handson/handson-03/apps-02.yml\nkubectl get pods\n```\nüëÄ [–ü—Ä–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª–∏–º–∏—Ç–æ–≤](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits)\n\n**Then** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—Éc—Ç–∏–ª–æ—Å—å\n1. –ù–∞–π—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã\n1. –ù–∞–π—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å\n1. –í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –ø–æ–¥—ã —Å –æ—à–∏–±–æ—á–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ `name/image - status`. –°–º–æ—Ç—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é jsonpath/go-template [kubectl jsonpath doc](https://kubernetes.io/docs/reference/kubectl/jsonpath/)\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ó–∞–¥–∞–π—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫–≤–æ—Ç—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –≤–∞—à–µ–º namespace\n\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ö–∞–∫ —É–∑–Ω–∞—Ç—å —á—Ç–æ —Ç–∞–º —Å –Ω–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã?\n1. –ï—Å–ª–∏ –¥—Ä—É–≥–æ–π –∑–∞–¥–µ–ø–ª–æ–∏—Ç –ø–æ–¥ —Å —Ç–∞–∫–∏–º –∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ–º, –æ–Ω –ø–µ—Ä–µ–∑–∞—Ç—Ä—ë—Ç –º–æ–π?\n1. –ê –≤ –∫–∞–∫–æ–π namespace –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–¥–µ–ø–ª–æ–∏–ª–æ—Å—å?\n1. –ê –Ω–∞ –∫–∞–∫–æ–º —É–∑–ª–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å?\n1. –ö–∞–∫ —É–∑–Ω–∞—Ç—å –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ?\n1. –ß—Ç–æ –∑–Ω–∞—á–∞—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ CPU 200mi ? –≠—Ç–æ —Å–∫–æ–ª—å–∫–æ?\n1. –∫–∞–∫ –ø–æ–Ω—è—Ç—å –∫–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –º–µ–Ω—è?\n1. –∫–∞–∫ –ø–æ–Ω—è—Ç—å –∫–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–∞–º–∫–∞—Ö –Ω–µ–π–º—Å–ø–µ–π—Å–∞??\n1. –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å—ã—Ä–æ–π –≤—ã–≤–æ–¥ api?\n1. –ø–æ–ª—É—á–∏–ª–æ—Å—å –ª–∏ —É –≤–∞—Å –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? –ö–∞–∫–∏–µ –±—ã–ª–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –û–±—ä—è—Å–Ω–∏—Ç–µ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –µ–º—É –Ω—É–∂–Ω–æ –≤—ã–∫–ª—é—á–∞—Ç—å—Å—è? –° –ø–æ–º–æ—â—å—é –∫–∞–∫–∏—Ö –∫–æ–º–∞–Ω–¥ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —É–∑–Ω–∞—Ç—å –∫—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è, `app-knife` –∏–ª–∏ `app-butter`?\n\nK8S Application networking\n-------------------------------\n1. –í–∏–¥—ã Service Discovery –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ö–æ–º–ø—Ä–æ–º–∏—Å—Å—ã –∫–∞–∂–¥–æ–≥–æ\n1. –†–æ—É—Ç–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä –∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞, NSX-T –∏ K8S\n1. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è\n1. K8S Services and namespaces\n1. –î–µ–º–æ kubectl exec curl —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º watch –¥–ª—è get pods/get svc -o wide\n\nüõí *–ú–∞—Ç–µ—Ä–∏–∞–ª—ã*\n1. [kubectl port-forward docs](https://kubernetes.io/docs/tasks/access-application-cluster/port-forward-access-application-cluster/)\n1. [DNS Pod Service](https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pods)\n1. [Debugging DNS Resolution](https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/)\n1. [man resolv.conf](https://man7.org/linux/man-pages/man5/resolv.conf.5.html)\n\nHands-on practice quest #04: Access to application via services\n---------------------------------------------------------------\n–ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, –∏—Å—Å–ª–µ–¥—É–µ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.\n–°—Ç–∞—Ä–∞–µ–º—Å—è –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –Ω–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—ã—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç—å cli-tools –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç\n\u003e –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ [handson #03](#hands-on-practice-quest-03-run-apps-in-cluster)\n```shell\n# –ø—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ –µ—Å—Ç—å –ø–æ–¥ debug, –∏–Ω–∞—á–µ –∑–∞–ø—É—Å—Ç–∏–º (—Å–º handson #02)\nkubectl get pod debug \n# –û—Ç–∫—Ä–æ–µ–º –Ω–æ–≤—É—é –∫–æ–Ω—Å–æ–ª—å\n# –ó–∞–π–¥—ë–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –±—É–¥–µ–º –Ω–µ–≥–æ –±—É–¥–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –¥–µ–±–∞–≥ –Ω–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\nkubectl exec -it debug -- /bin/bash\n...\n```\n\n1. **–ó–∞–¥–∞–Ω–∏–µ**: –° –ø–æ–º–æ—â—å—é –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∏–∂–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ IP –∞–¥—Ä–µ—Å—Å –∏ –∏–º—è –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ `Pod` –∏ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–∏—Å—É `app-knife`\n   \u003e –ß—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å - [Debugging DNS Resolution](https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/)\n   \u003e –∏ [DNS Pod Service](https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pods)\n1. **–ó–∞–¥–∞–Ω–∏–µ**: –î–æ–ø–∏—à–µ—Ç–µ —Å–µ—Ä–≤–∏—Å –¥–ª—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ app-knife\n\n```shell\ncat handson/handson-04/services.yml\nkubectl explain service.spec\nkubectl expose --help\n# –ø—Ä–∏–º–µ–Ω—è–µ–º –∏—Ö\nkubectl apply -f  handson/handson-04/services.yml\nkubectl get services\nkubectl get endpoints\n```\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞? ([–û –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ labels](https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#motivation))\n1. –ö—Ç–æ –±—ã—Å—Ç—Ä–µ–π —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ `kubectl delete pod app-knife/app-butter`? –ü–æ–¥—É–º–∞–π—Ç–µ –ø–æ—á–µ–º—É?\n1. –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ `kubectl port-forward pod/app-knife 8080` –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω `containerPort`?\n1. –ù–∞ —á—Ç–æ –≤–ª–∏—è–µ—Ç containerPort –≤ pod.spec.containers.ports.containerPort?\n1. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–π –∫–æ–º–∞–Ω–¥–µ `kubectl port-forward pod/app-knife 8080` –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å pod app-knife?\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –ó–∞—Å—Ç–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å `app-butter-service` –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å json –æ—Ç–≤–µ—Ç. (–°–æ–≤–µ—Ç: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, –æ—Ç–≤–µ—á–∞—è –Ω–∞ –æ—Ç–≤–µ—Ç—ã –¥–∞–ª—å—à–µ –ø–æ —Å–ø–∏—Å–∫—É)\n1. –û–±—ä—è—Å–Ω–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç —Å–µ—Ä–≤–∏—Å–∞ `app-knife` –≤ —Å–ª—É—á–∞—è—Ö:\n    1. –Ω–µ —Å–µ—Ä–≤–∏—Å–∞ `app-butter-service`.\n    1. –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å `app-butter-service` –Ω–æ –Ω–µ—Ç labels —É `app-butter`. (–í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å–± debug –ø–æ–¥–æ–º –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `app-butter-service`)\n    1. –µ—Å—Ç—å –∏ —Å–µ—Ä–≤–∏—Å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â–∏–π –µ–º—É `labels.app`? (–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–æ–π `kubectl edit pod app-butter` –∏ –¥–æ–±–∞–≤–∏—Ç—å `metadata.labels.app=app-butter`\n1. –ú–æ–∂–Ω–æ –ª–∏ –≤–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —à–µ–ª –≤ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ?\n1. –ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–µ –∑–∞—Ö–æ–¥—è –≤ –Ω–µ–≥–æ?\n\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ debug –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:\n```shell\nkubectl get pods\n[debug] $ nslookup \u003cpod-ip\u003e\n[debug] $ nslookup \u003cpod-name\u003e\n[debug] $ nslookup \u003cservice-ip\u003e\n[debug] $ nslookup \u003cservice-name\u003e\n```\n\n**Then** nslookup –≤—ã–¥–∞–ª –æ–±—Ä–∞—Ç–Ω—ã–µ –∑–æ–Ω—ã –ø–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–º IP\n1. –ö—Ç–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–µ–Ω –∑–∞ —ç—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ?\n1. –ö–∞–∫ –Ω–∞–π—Ç–∏ –∫—Ç–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–µ–Ω?\n1. –ú–æ–∂–Ω–æ –ª–∏ –µ–≥–æ –ø–µ—Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å?\n1. **–ó–∞–¥–∞–Ω–∏–µ**: –ù–∞–π—Ç–∏ –∫—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ DNS –∏–º–µ–Ω–∏\n\nüëÄ [man resolv.conf](https://man7.org/linux/man-pages/man5/resolv.conf.5.html)\n\n```shell script\n[debug] $ cat /etc/resolv.conf\nkubectl get services --all-namespaces | grep \u003cnameserver-ip\u003e\nkubectl get pods --namespace=kube-system -l k8s-app=kube-dns\n```\n\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –æ—Ç–≤–µ—á–∞—è –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:\n1. –ö–∞–∫ —É–∑–Ω–∞—Ç—å —á—Ç–æ —Å–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ?\n1. –†–µ—Å—Ç–∞—Ä—Ç–æ–≤–∞–ª–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ `kubectl apply -f pod.yml` –∏ –ø–æ—á–µ–º—É?\n1. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å `metadata.labels.app` ?\n1. –ß—Ç–æ –µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–∏—Å—É?\n1. –ö—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `kube-dns` ?\n1. –ö–∞–∫ –¥–∏–∞–≥–Ω–∞—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `kube-dns` ?\n\nK8S Internal and External access to containers\n----------------------------------------------\n1. Containers Shell\n1. K8S Ingress –∏ –µ–≥–æ –æ–ø–∏—Å–∞–Ω–∏–µ\n1. kubectl exec\n\nüõí *–ú–∞—Ç–µ—Ä–∏–∞–ª—ã*\n1. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± ingress](https://kubernetes.io/docs/concepts/services-networking/ingress/)\n\nHands-on practice quest #05: Redeploy application with ingress\n--------------------------------------------------------------\n–ê–Ω–æ–Ω—Å–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏–∑ –≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞. –ü–æ–¥—ã–º–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —É—á–∏–º—Å—è –∏—Å–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –ø–æ–º–æ—â—å—é –∏–∑—É—á–µ–Ω–Ω—ã—Ö —Ä–∞–Ω–µ–µ –∫–æ–º–∞–Ω–¥\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø –∏–∑ —Å–µ—Ç–∏ –±–∞–Ω–∫–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Å–ª–µ–¥—É—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º\n\n```shell script\n# –¥–∞–ª–µ–µ –º—ã –¥–æ–ª–∂–Ω—ã —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Ç–µ—Å—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–ª\nwatch -n0.1 curl -s -i http://app-knife-ingress.\u003cnamespace-name\u003e.lb.\u003ccluster-name\u003e.k8s.raiffeisen.ru\nkubectl explain ingress.spec\n# –ó–∞–≤–µ—Ä—à–∏—Ç–µ ingress –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é\nvi handson/handson-05/ingress.yml\nkubectl apply -f handson/handson-05/ingress.yml\n```\n\n**Then** `watch` –≤–µ—Ä–Ω—É–ª –æ—Ç–≤–µ—Ç *app-knife* —Å–µ—Ä–≤–∏—Å–∞. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ö–∞–∫ —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–∏—Å–∞? –ü–æ—á–µ–º—É —à–∞–±–ª–æ–Ω DNS –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π?\n1. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å DNS –∏–º—è –Ω–µ –ø–æ —à–∞–±–ª–æ–Ω—É? (my-awesome-domain.ru)\n1. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å?\n1. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Å—Å—ã–ª–∞–µ–º—Å—è –≤ ingress –Ω–µ –±—É–¥–µ—Ç?\n1. –ß—Ç–æ —Å–ª—É—á–∏—Ç—Å—è –µ—Å–ª–∏ –µ–≥–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã? –ü–æ—á–µ–º—É?\n1. –ö–∞–∫ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –≤–Ω—É—Ç—Ä–∏?\n1. –°–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?\n1. –ö–∞–∫ ingress —Å–≤—è–∑–∞–Ω —Å ingress-controller?\n1. –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è ingress-controller?\n1. –ö—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ \"–∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ\" –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏–º—ë–Ω —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∏–º—ë–Ω –¥–ª—è ingress?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏ API —Å –ø–æ–º–æ—â—å—é `kubectl explain ingress`?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ü–µ—Ä–µ–ø–∏—à–∏—Ç–µ ingress —Å beta –≤–µ—Ä—Å–∏–∏ API –Ω–∞ —Ä–µ–ª–∏–∑–Ω—É—é - `networking.k8s.io/v1`\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ ingress, DNS –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è? –ï—Å–ª–∏ –¥–∞ —Ç–æ –∫–∞–∫?\n\nK8S Namespace, Pods, Containers again and Scaling\n-------------------------------------------------\n1. ReplicaSet\n1. Deployment\n1. TopologyKey\n\nHands-on practice quest #06: Redeploy application with replicas\n---------------------------------------------------------------\n–ò–∑—É—á–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤–æ–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ —Å —É—á—ë—Ç–æ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∂–∏–∑–Ω–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ**: –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –ø–æ–¥–µ –Ω–∞ –∑–∞–ø—É—Å–∫ c –ø–æ–º–æ—â—å—é deployment (–¥–ª—è app-butter –∏ app-knife)\n\n```shell\n[tty0] $ watch -e -n0.1 curl --fail --show-error -s -i app-butter-ingress.\u003cnamespace-name\u003e.lb.\u003ccluster-name\u003e.k8s.raiffeisen.ru\n[tty1] kubectl explain deployment\n# –ø—Ä–∏–º–µ–Ω—è–µ–º –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç\n## —Å–º–æ—Ç—Ä–∏–º —à–∞–±–ª–æ–Ω\n[tty1] $ cat handson/handson-06/deployment.yml\n## –∑–∞–ø–æ–ª–Ω—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â—É—é —Å–µ–∫—Ü–∏—é\n[tty1] $ vi handson/handson-06/deployment.yml\n[tty1] $ kubectl apply -f handson/handson-06/deployment.yml\n# –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏\n[tty0] $ watch -e -n0.1 curl --fail --show-error -s -i app-butter-ingress.\u003cnamespace-name\u003e.lb.\u003ccluster-name\u003e.k8s.raiffeisen.ru\n```\n\n\u003e –§–ª–∞–≥ `--fail` –∫–æ–º–∞–Ω–¥—ã curl –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É —Å –æ—à–∏–±–æ—á–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º –µ—Å–ª–∏ –±—ã–ª HTTP –æ—Ç–≤–µ—Ç –Ω–µ 200. –í –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö curl –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ–ª–∞–≥ `--fail-with-body` –∏ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ `--show-error`\n\n\u003e –§–ª–∞–≥ `--show-error` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∞—è –±—ã–ª–∞ –æ—à–∏–±–∫–∞ –≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –≤–µ—Ä–Ω—É–ª—Å—è –Ω–µ 200 —Å—Ç–∞—Ç—É—Å. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —Ç.–∫ —Ñ–ª–∞–≥ `--fail` —Å–∫—Ä—ã–≤–∞–µ—Ç –≤—ã–≤–æ–¥ –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏\n\n\u003e –§–ª–∞–≥–∏ `-s` –∏ `-v` –∫–æ–º–∞–Ω–¥—ã curl –Ω–æ—Å—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –¥–µ–ª–∞—é—Ç –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥\n\n\u003e –§–ª–∞–≥ `-e` –¥–ª—è –∫–æ–º–∞–Ω–¥—ã watch –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—ã –∫–æ–º–∞–Ω–¥—ã –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –æ—à–∏–±–∫–æ–π\n\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –¥–ª—è deployment app-butter-deployment –Ω–∞ 3 —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `kubectl scale` –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –Ω–∞—à–µ–≥–æ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞\n\n\u003e –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π `watch -e -n0.1 curl --fail --show-error -s -i app-butter-ingress.\u003cnamespace-name\u003e.lb.\u003ccluster-name\u003e.k8s.raiffeisen.ru`\n\n**Then** —Ç–µ—Å—Ç —É–ø–∞–ª –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–ø–ª–∏–∫ –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –≤–µ—Ä–Ω—É–ª HTTP 500\n1. –ü–æ—á–µ–º—É —É–ø–∞–ª —Ç–µ—Å—Ç? –†–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –ø—Ä–æ–±–ª–µ–º—ã\n1. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ö–∞–∫ —É–∑–Ω–∞—Ç—å –≤ –∫–∞–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ø–∞–ª –∑–∞–ø—Ä–æ—Å?\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Å—Ä–∞–∑—É —Å–æ –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤?\n1. –ö–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∏–Ω—Å—Ç–∞–Ω—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?\n1. –í –∫–∞–∫–æ–π –º–æ–º–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ curl?\n1. –ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, –∫–∞–∫–æ–π –≤–∏–¥ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ app-butter –∏–∑ app-knife?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –Ω–∞ –∫–∞–∫–∏—Ö —É–∑–ª–∞—Ö –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤—ã–≤–µ–¥–∏—Ç–µ –µ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∏–º—è/—É–∑–µ–ª\n\nK8S Application Probes and full deployments\n-------------------------------------------\n1. liveness and readiness probess\n1. Application access model\n1. LB probes and application availability for user corner cases\n1. K8S Deploments\n\nüõí *–ú–∞—Ç–µ—Ä–∏–∞–ª—ã*\n1. [Kubernetes probes](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/)\n\nHands-on practice quest #07: Redeploy application with probes\n-------------------------------------------------------------\n–ü—ã—Ç–∞–µ–º—Å—è –º–∏—Ç–∏–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ K8S\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ** –¥–æ–±–∏—Ç—å—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±\n\nüëÄ [Kubernetes probes](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/)\n\n–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ rediness/liveness –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –Ω–µ—Ç\n```shell\n[tty0] $ watch -e -n0.1 curl --fail --show-error -s -i app-butter-ingress.\u003cnamespace-name\u003e.lb.\u003ccluster-name\u003e.k8s.raiffeisen.ru\n\n[tty1] $ kubectl edit deployment app-butter-deployment\n[tty1] $ kubectl apply -f deployment.yml\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ë—É–¥—É—Ç –ª–∏ –¥–æ—Ö–æ–¥–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ—Å–ª–∏ livenessProbe –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞ –∞ readinessProbe –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞?\n1. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ —Ç–æ–ª—å–∫–æ readiness –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã app-butter?\n1. –í –∫–∞–∫–æ–º —Å–ª—É—á–∞–µ –Ω–µ–ª—å–∑—è –±–µ–∑ `startupProbe`?\n1. –ö–∞–∫ —Å–≤—è–∑–∞–Ω—ã `startupProbe` –∏ `livenessProbe`, `readinessProbe`?\n1. –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–π–º–∞—Ç—å —Ç–∞–∫–æ–π –∂–µ —ç—Ñ—Ñ–µ–∫—Ç –∫–∞–∫ 500 –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, –Ω–æ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?\n1. –î–æ—Ö–æ–¥—è—Ç –ª–∏ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ Service –µ—Å–ª–∏ Pod –≤ —Å—Ç–∞—Ç—É—Å–µ Terminating?\n\nHands-on practice quest #7.1: Edit deployment\n---------------------------------------------\n–†–∞–∑–±–∏—Ä–∞–µ–º—Å—è —Å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ —Ä–∞–±–æ—Ç—ã Pod —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Deployment\\*\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ** –ø–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å `ReplicaSet`\n\n–ò–∑–º–µ–Ω–∏–º `metadata.labels.app` –Ω–∞ `app-butter-edited`\n```shell\n[tty0] $ kubectl get replicasets -w\n[tty1] $ kubectl edit pod app-butter-\u003ccustom-id-autocomplete-it\u003e\n[tty1] $ kubectl get pods\n```\n\n–í–µ—Ä–Ω—ë–º –æ–±—Ä–∞—Ç–Ω–æ metadata.labels.app\n```shell\nkubectl edit pod app-butter-\u003c\u003e\nkubectl get pods\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å–æ —Å—Ç–∞—Ä—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ labels?\n1. –û–±—ä—è—Å–Ω–∏—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ ReplicaSet?\n1. –ö–∞–∫ –ø–æ–Ω—è—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω –ª–∏ –æ–Ω –∫ Deployment?\n1. –ë—É–¥–µ—Ç –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å replica set?\n1. –ö–∞–∫ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –ø–æ–¥—ã?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –í –∫–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è `CURRENT` –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ `kubectl get rs`, –Ω–∞–∑–æ–≤–∏—Ç–µ —Ö–æ—Ç—è –±—ã –¥–≤–µ –∏ –ø–æ—è—Å–Ω–∏—Ç–µ –∫–∞–∫–∏–µ –∏–∑ –Ω–∏—Ö –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–∞–ª—å–Ω—ã –≤ –≤–∞—à–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö\n\nK8S Deployment rollout\n----------------------\n1. –û—Ç–ª–∏—á–∏—è Deployment –æ—Ç ReplicaSet –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏\n1. kubectl rollout undo demo\n\nHands-on practice quest #07.2: deployment rollout\n-------------------------------------------------\n–ò—Å—Å–ª–µ–¥—É–µ–º –º–µ—Ö–∞–Ω–∏–∑–º—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–∫–∞—Ç–∞ —Ä–µ–≤–∏–∑–∏–π –≤ K8S\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ** –ø–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã –æ—Ç–∫–∞—Ç–∞ `Deployment`\n\n–ò–∑–º–µ–Ω–∏–º metadata.labels.app\n```shell\n[tty0] $ kubectl get rs -w # rs = replicaset\n[tty1] $ kubectl rollout history deployment app-butter-deployment\n[tty1] $ kubectl rollout undo deployment app-butter-deployment --to-revision=\u003crevision-number\u003e\n[tty1] $ kubectl get deployment app-butter-deployment -o yaml\n[tty1] $ kubectl get rs\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ —É–∂–µ –æ—Ç–∫–∞—á–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é (–ø–æ—Å–ª–µ–¥–Ω—é—é)?\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ deployments –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ?\n1. –ò–∑–º–µ–Ω–∏—Ç—Å—è –ª–∏ –≤–µ—Ä—Å–∏—è deployment –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –Ω–∏–º `ReplicaSet`? –ê –µ—Å–ª–∏ Pod?\n1. –ü–æ—á–µ–º—É –≤ —Å–ø–∏—Å–∫–µ `ReplicaSet` –µ—Å—Ç—å –∫–∞–∫–∏–µ —Ç–æ –ø—É—Å—Ç—ã–µ? –û–±—ä—è—Å–Ω–∏—Ç–µ –∑–∞—á–µ–º –æ–Ω–∏\n\nK8S Multi path applications\n---------------------------\n1. Basic Reverse proxy concepts\n1. Ingress rules - rewrite, split locations, certs\n\nüõí *–ú–∞—Ç–µ—Ä–∏–∞–ª—ã*\n1. [Nginx ingress docs](https://kubernetes.io/docs/concepts/services-networking/ingress/)\n1. [Nginx ingress path mapping](https://kubernetes.github.io/ingress-nginx/user-guide/ingress-path-matching/)\n1. [Reverse proxy - HowTo](https://kinsta.com/blog/reverse-proxy/)\n\nHands-on practice quest #08: Two apps in one domain\n---------------------------------------------------\n–ò–∑—É—á–∞–µ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—É—é —Å—Ö–µ–º—É.\n–ü–æ–¥—ã–º–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ Reverse Proxy –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ**: —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π ingress, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ\n\nüëÄ [Nginx ingress docs](https://kubernetes.io/docs/concepts/services-networking/ingress/)  \nüëÄ [Nginx ingress path mapping](https://kubernetes.github.io/ingress-nginx/user-guide/ingress-path-matching/)  \nüëÄ [Nginx ingress rewrite](https://kubernetes.github.io/ingress-nginx/examples/rewrite/)  \nüëÄ [Nginx ingress forwarded prefix header](https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/#x-forwarded-prefix-header)  \nüëÄ [–ü—Ä–æ Reverse Proxy —Å X-Forwarder-* –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Spring](https://tomgregory.com/spring-boot-behind-load-balancer-using-x-forwarded-headers/)\n\n\n```shell\n# –¢–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å\n[tty0] $ watch -n0.5 curl -s -i training-app.\u003cnamespace-name\u003e.lb.\u003ccluster-name\u003e.k8s.raiffeisen.ru/app-knife/\n# or\n[tty0] $ watch -n0.5 curl -s -i training-app.\u003cnamespace-name\u003e.lb.\u003ccluster-name\u003e.k8s.raiffeisen.ru/app-butter/\n\n[tty1] $ kubectl explain ingress.spec.rules.http.paths\n# –í—ã–Ω–æ—Å–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–Ω—ã–µ –ø—É—Ç–∏ –æ–¥–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞\n[tty1] $ vi ingress.yml\n[tty1] $ kubectl apply -f ingress.yml\n```\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π `app-butter`\n1. –ö–∞–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –ø–æ–¥–æ–≤ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞?\n1. –ö–∞–∫ –µ—â—ë –º–æ–∂–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á—Ç–æ–±—ã –≤—ã–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏ –≥—Ä—É–ø–ø—ã –ø–æ–¥–æ–≤?\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ü—Ä–æ–±–æ–≤–∞–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å UI? –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω—É–∂–Ω–æ?\n1. –ö–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –ø—É—Ç—è–º–∏? (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞)\n1. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞?\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤(–ø–æ–¥–æ–≤) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?\n1. –∫–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ —Å–µ–π—á–∞—Å –µ—Å—Ç—å \"–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏\" –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ?\n1. –ü–æ –∫–∞–∫–æ–º—É –ø—É—Ç–∏ (HTTP PATH) –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –Ω–æ–≤–æ–≥–æ ingress?\n1. –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –ø—É—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –∞ –Ω–µ –≤—Å–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ? (–Ω–∞–ø—Ä–∏–º–µ—Ä `/api/butter` –∏ `/api/knife` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ). –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ–±—ã –≤ —Ç–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–ª–∏ –æ–±–∞ ingress –ø—Ä–∞–≤–∏–ª–∞?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: HAL API: –∫–∞–∫ –±—ã—Ç—å —Å –æ–±—Ä–∞—Ç–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏? –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å –∫–∞–∫–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –ø—Ä–∏—à—ë–ª –∑–∞–ø—Ä–æ—Å?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –°–¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫, —á—Ç–æ–±—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏–ª url –±–µ–∑ `/app-knife/info` –∏ `/app-butter/info` - —Ç.–µ —á—Ç–æ–±—ã `/info` –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞—Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ `training-app` ingress\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –î–æ–±–∞–≤—å—Ç–µ `x-forwarder-prefix` –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è ingress `traingin-app`\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*\\*: –ú–æ–∂–Ω–æ –ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å TLS –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ ingress? –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–¥–µ–ª–∞—Ç—å\n\nK8S ConfigMaps\n----------------\n1. DNS TTL –∏ –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ maintenance –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n1. –õ–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ DNS Discovery\n1. K8S Config maps - –ß—Ç–æ —ç—Ç–æ –∏ –≥–¥–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞ –≥–¥–µ –Ω–µ—Ç\n1. \\* –ü–æ–¥—Ä–æ–±–Ω–æ Forwarded RFC + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è\n\nüõí *–ú–∞—Ç–µ—Ä–∏–∞–ª—ã*\n1. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ ConfigMap](https://kubernetes.io/docs/concepts/configuration/configmap/)\n1. [–ü—Ä–æ Shell ENV Variables](https://en.wikipedia.org/wiki/Environment_variable)\n1. [Exposing information to pod](https://kubernetes.io/docs/tasks/inject-data-application/environment-variable-expose-pod-information/)\n\nHands-on practice quest #09: Redeploy application with custom configuration\n---------------------------------------------------------------------------\n–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –ø—ã—Ç–∞–µ–º—Å—è —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n–ü–æ–¥—ã–º–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ \"–∫–æ—Ä–æ–±–æ—á–Ω—ã—Ö\" –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç   app-knife-deployment –∏ app-butter-deployment –≤ —Å–≤–æ—ë–º namespace  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ (`CALL_HOST`) –∏ —Ç–∞–π–º–∞—É—Ç–∞ app-butter (`CALL_TIMEOUT`) –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–π —Å–º–µ–Ω—ã\n\nüëÄ [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ ConfigMap](https://kubernetes.io/docs/concepts/configuration/configmap/)\n\n```shell\nkubectl explain pod.spec.containers.env \nkubectl explain configmap \nvi configmap.yml\nvi deployment.yml\nkubectl apply -f configmap.yml\nkubectl create configmap -h \n```\n**Then** ConfigMap —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–ª—Å—è –∏ –≤—ã —É–±–µ–¥–∏–ª–∏—Å—å —á—Ç–æ –æ–Ω —Å–æ–∑–¥–∞–Ω  \n**–ó–∞–¥–∞–Ω–∏–µ**: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–≤–µ—Å—Ç–∏ –∫–ª—é—á–∏ —Å–æ—Ö—Ä–∞–Ω–Ω—ë–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ ConfigMap\n1. –í –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ ConfigMap?\n1. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–ª—é—á–∏ –≤ —Å–µ–∫—Ü–∏—é `.data` –∏ `.binaryData` ?\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –±—ã–ª–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –∏ –ø–æ—á–µ–º—É —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ? –ü–æ—è—Å–Ω–∏—Ç–µ\n\nüëÄ [–ü—Ä–æ Shell ENV Variables](https://en.wikipedia.org/wiki/Environment_variable)\n\n**Then** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥—Ç—è–Ω—É–ª–∏—Å—å –≤ app-knife  \n**–ó–∞–¥–∞–Ω–∏–µ**: –∏–∑–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é - —Å–º–µ–Ω–∏—Ç—å —Ç–∞–π–º–∞—É—Ç. –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ\n1. –ö–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ?\n1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—ä—è—Å–Ω–∏—Ç—å –ø–æ—á–µ–º—É —Ç–∞–∫\n\n**Then** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥—Ç—è–Ω—É–ª–∏—Å—å –≤ app-knife  \n**–ó–∞–¥–∞–Ω–∏–µ**: –¥–æ–±–∞–≤—å—Ç–µ –≤ configmap.yml –Ω–µ –ø—Ä–æ—Å—Ç–æ key-value –Ω–∞—Å—Ç—Ä–æ–π–∫—É, –∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π `nginx.conf` \"—Ñ–∞–π–ª\" (–∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∏–∂–µ). –°–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –ø–∞–ø–∫—É `/usr/src/app`\n\n```plain\nuser       www www;\nerror_log  logs/error.log;\n\nhttp {\n  include    conf/mime.types;\n  index    index.html index.htm index.php;\n\n  server { # php/fastcgi\n    listen       80;\n    server_name  example.com www.example.com;\n    \n    location ~ \\.php$ {\n      fastcgi_pass   127.0.0.1:1025;\n    }\n  }\n}\n```\n\n```shell\nkubectl explain pod.spec.volumes\nkubectl explain pod.spec.containers.volumeMounts\n\nvi configmap.yml\nvi deployment.yml\n\nkubectl apply -f configmap.yml\nkubectl apply -f deployment.yml\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ö–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª–µ?\n1. –í—Å–µ–≥–¥–∞ –ª–∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞?\n1. –ö–∞–∫ —É–∑–Ω–∞—Ç—å –ø–æ–Ω—è—Ç—å, –±—É–¥—É—Ç –ª–∏ —Ñ–∞–π–ª–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?\n1. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–¥—Ç—è–Ω—É–ª–∏—Å—å?\n1. –Ω—É–∂–µ–Ω –ª–∏ —Ä–µ—Å—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è configmap? –û–±–æ—Å–Ω—É–π—Ç–µ —Ç–∞–∫ –ª—É—á—à–µ?\n1. –ú–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ env?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –î–æ–±–∞–≤—å—Ç–µ –∏–º—è –º–∞—à–∏–Ω—ã (`nodeName`) –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –ø–æ–¥ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `POD_NODE_NAME`\n\nüëÄ [Exposing information to pod](https://kubernetes.io/docs/tasks/inject-data-application/environment-variable-expose-pod-information/)\n\nK8S Secrets\n----------------\n1. K8S Secrets object. Secret types and security considerations\n1. Secrets best practice for Cloud Native apps\n1. Required support for security from infrastructure side and app side\n\nüõí *–ú–∞—Ç–µ—Ä–∏–∞–ª—ã*\n1. [About Secret Encryption](https://kubernetes.io/docs/tasks/administer-cluster/kms-provider/)\n\nHands-on practice quest #10: K8S Secrets simple practice\n--------------------------------------------------------\n–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ K8S, –æ–±—Å—É–∂–¥–∞–µ–º –∏—Ö –∫–æ–º–ø—Ä–æ–º–∏—Å—ã –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\n–ü—Ä–æ–±—É–µ–º —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Å–µ–∫—Ä–µ—Ç–æ–≤\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç `app-knife-deployment`   –∏ `app-butter-deployment` –≤ —Å–≤–æ—ë–º namespace  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ**: —Å–æ–∑–¥–∞—Ç—å —Å–µ–∫—Ä–µ—Ç –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—è —Å–µ–∫—Ü–∏–∏ `data` –∏ `stringData`. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ –Ω–∞–ª–∏—á–∏–µ –∏ —Ñ–æ—Ä–º–∞—Ç\n\n```shell\nkubectl explain secrets\nkubectl explain secrets.data\nkubectl explain secrets.stringData\nvi handson-10/secret.yml\nkubectl apply -f handson-10/secret.yml\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è, –æ—Ç–≤–µ—á–∞—è –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:\n1. –í –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –≤ —Å–µ–∫—Ü–∏–∏ `data`?\n1. –ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å \"–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ\" –¥–∞–Ω–Ω—ã–µ –≤ `data` –∏ —á—Ç–æ –±—É–¥–µ—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Ö –ø—Ä–æ—á–∏—Ç–∞—Ç—å?\n1. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –∫–ª—é—á–∏ –≤ `data` –∏ `stringData` –ø–µ—Ä–µ—Å–µ–∫—É—Ç—Å—è?\n1. –ú–æ–∂–Ω–æ –ª–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ stringData –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞ (`kubectl apply -f ...`)\n\n**–ó–∞–¥–∞–Ω–∏–µ**: —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã `username` –∏ `password` –≤ –ø–∞–ø–∫—É `/usr/src/app` –≤–º–µ—Å—Ç–µ —Å –∫–æ–Ω—Ñ–∏–≥–æ–º `nginx.conf` –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è\n\n```shell\n# –∏–∑—É—á–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏\nkubectl explain pod.spec.volumes\nkubectl explain pod.spec.containers.volumeMounts\nkubectl explain pod.spec.containers.env \nkubectl explain pod.spec.containers.env.valueFrom.secretKeyRef\n\n# –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–∫—Ä–µ—Ç—ã –≤ –Ω–∞—à–∏ –ø–æ–¥—ã \nvi handson-10/deployment.yml\nkubectl apply -f handson-10/deployment.yml\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –∫–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `username` –∏ `password` —Å–µ–∫—Ä–µ—Ç–∞ `the-secret-of-tasty-sandwich`? –ö–∞–∫–æ–µ –æ–Ω–æ –∏ –ø–æ—á–µ–º—É?\n1. –º–æ–∂–Ω–æ –ª–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç?\n1. —á–µ–º —Å–µ–∫—Ä–µ—Ç –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç ConfigMap\n1. –±–µ–∑–æ–ø–∞—Å–µ–Ω –ª–∏ —Ç–∞–∫–æ–π —Å–µ–∫—Ä–µ—Ç?\n1. —á–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è —Å–µ–∫—Ü–∏–∏ data –∏ stringData?\n1. —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ–±—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —Å–µ–∫—Ä–µ—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏?\n1. –ø–æ–º–Ω–∏—Ç–µ –≥–¥–µ –º—ã —É–∂–µ —Å—Ç–∞–ª–∫–∏–≤–∞–ª–∏—Å—å —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏?\n1. —á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `secrets` –∏ `configmaps` –≤–æ –æ–¥–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é?\n\n**–ó–∞–¥–∞–Ω–∏–µ**: —Å–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç `nginx.conf` –∏ –ª—é–±–æ–µ –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π –≤ `ConfigMap` –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é - `/usr/src/app`s\n\n```shell\n# –∏–∑—É—á–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏\nkubectl explain pod.spec.containers.volumeMounts.subPath\nkubectl explain pod.spec.volumes.secret.items\nkubectl explain pod.spec.volumes.configMap.items\n\nvi handson-10/deployment.yml\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ö–∞–∫–∏–µ –≤–æ–∑–Ω–∏–∫–ª–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏?\n1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—ä—è—Å–Ω–∏—Ç—å –ø–æ—á–µ–º—É —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ?\n1. –ö–∞–∫ –±—ã —Å–¥–µ–ª–∞–ª–∏ –≤—ã?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–µ–∫—Ä–µ—Ç –¥—Ä—É–≥–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏\n\n```shell\nkubectl create secret generic secret_name \\\n\n# –î–∞–ª–µ–µ —á–µ—Ç—ã—Ä–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞ –∏–∑ —Ñ–∞–π–ª–∞\n1. --from-file=secret.txt \\ \n2. --from-file=key=secret.txt \\ \n3. --from-literal=key=value\n4. --from-env-file=.env\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –ø–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–º—É –∑–∞–¥–∞–Ω–∏—é\n1. –í —á—ë–º –æ—Ç–ª–∏—á–∏–µ —Ç–∏–ø–∞ —É regcred –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞? –ö–∞–∫ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –≤–∞—à –ø–∞—Ä–æ–ª—å?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ö–æ–≥–¥–∞ —Ç–∞–∫–æ–π —Å–ø–æ—Å–æ–± –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–æ–±–µ–Ω?\n1. **–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–π—Ç–∏ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å –∏–∑ —Å–µ–∫—Ä–µ—Ç–∞ regcred ( —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –≤ [–∑–∞–¥–∞–Ω–∏–∏ 02](#hands-on-practice-quest-02-i-have-an-application-i-wish-deploy-it-to-production) )\n\nK8S Apps Distribution\n---------------------\n1. Manage application topology\n1. Taints and Tolerations\n1. Topology keys\n1. Disruption Budget\n1. Node maintenance\n\nüõí *–ú–∞—Ç–µ—Ä–∏–∞–ª—ã*\n1. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è](https://kubernetes.io/docs/setup/best-practices/cluster-large/)\n1. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ Affinity –∏ —Å–ø–æ—Å–æ–±—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Pod](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/)\n\nHands-on practice quest #11: Reconfigure apps distribution\n----------------------------------------------------------\n–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å —Ç–µ—Ö–Ω–∏–∫–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º Pod –ø–æ Node –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ K8S. –ü–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–¥—ã –Ω–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç `app-knife-deployment`   –∏ `app-butter-deployment` –≤ —Å–≤–æ—ë–º namespace  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ**: –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥—ã —Ç–æ–ª—å–∫–æ –≤ –¥–≤—É—Ö –∑–æ–Ω–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö. üëÄ _–£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –¥–æ 10, —á—Ç–æ–±—ã –±—ã–ª–æ –±–æ–ª–µ–µ –Ω–∞–≥–ª—è–¥–Ω–æ_\n\n\u003e –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –æ–±—ä–µ–∫—Ç–∞ limitranges (—Å–æ–∑–¥–∞–≤–∞–ª—Å—è –≤ –∑–∞–¥–∞–Ω–∏–µ #03). üëÄ [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è](https://kubernetes.io/docs/setup/best-practices/cluster-large/)\n\u003e –ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç, —Ç–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `handson/handson-03/default-limits.yml` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –≤ 20Mi.\n\u003e –ü–æ—Å–ª–µ —á–µ–≥–æ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –µ–≥–æ –µ—Å–ª–∏ –Ω–µ—Ç —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:\n`kubectl apply -f handson/handson-03/default-limits.yml`.\n\u003e ‚ö†Ô∏è –≠—Ç–æ –º–µ—Ä–∞ –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –Ω–µ —Å–∫—É—à–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–ø–ª–∏–∫\n\n\n```shell\nkubectl edit deployment app-knife-deployment\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –í—Å—ë –ª–∏ —Ö–æ—Ä–æ—à–æ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏?\n1. –ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–æ–Ω—ã?\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–≤–∞–ª–∏–≤—à–∏–µ—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?\n1. –ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –Ω–æ–¥—ã –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–ø—É—â–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `app-knife`?\n1. –ö–∞–∫ –∑–∞–¥–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –ø–æ–¥—ã, –Ω–æ –∏ –æ–±—â–∏–π –ª–∏–º–∏—Ç –Ω–∞ –≤–µ—Å—å –Ω–∞—à –Ω–µ–π–º—Å–ø–µ–π—Å?\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–ª–∞—Å—Ç–µ—Ä–∞?\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥—ã –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö –∫—Ä–æ–º–µ –æ–¥–Ω–æ–≥–æ. __nodeAffinity –ø—Ä–∞–∫—Ç–∏–∫–∞__\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ü–æ–¥—É–º–∞–π—Ç–µ, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π? –ù–∞ —á—Ç–æ —ç—Ç–æ –ø–æ—Ö–æ–∂–µ –∏–∑ –≤–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?\n1. –ö–∞–∫—É—é —Ä–æ–ª—å –∏–≥—Ä–∞–µ—Ç `topologyKey` –¥–ª—è `requiredDuringSchedulingIgnoredDuringExecution`?\n1. –ú–æ–∂–Ω–æ –ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã app-knife –¥–µ–ø–ª–æ–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ —É–∑–ª—ã –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç app-butter?\n1. –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è anti affinity –ø—Ä–∞–≤–∏–ª–∞?\n\u003e [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ Affinity –∏ —Å–ø–æ—Å–æ–±—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Pod](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/)\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥—ã —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ –æ–∫–∞–∑–∞–ª–æ—Å—å –ø–æ –æ–¥–Ω–æ–º—É `app-knife` –∏ `app-butter`.  __podAffinity/podAntyAffinity –ø—Ä–∞–∫—Ç–∏–∫–∞__  \n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ö–∞–∫–∏–µ –µ—â—ë –º–æ–≥—É—Ç –±—ã—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?\n1. –û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –ª–µ–π–±–ª—ã –≤–∏–¥–∞ - `kubernetes.io/hostname`? –û–Ω–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ?\n1. –ö–∞–∫ –±—ã –≤—ã –Ω–∞–∑—ã–≤–∞–ª–∏ —Å–≤–æ–∏ –ª–µ–π–±–ª—ã –≤ –∫–æ–º–ø–∞–Ω–∏–∏? –ü–æ—è—Å–Ω–∏—Ç–µ –ø–æ—á–µ–º—É\n1. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É–∑–ª–∞?\n\n**–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –∑–æ–Ω—ã –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–ø—É—â–µ–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `app-knife`?\n\n```shell\nkubectl edit deployment app-knife-deployment\n```\n\n**–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*: –ò–∑—É—á–∏—Ç–µ –æ–±—ä–µ–∫—Ç `ResourceQuotas` –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å?  \n**–î–æ–ø –∑–∞–¥–∞–Ω–∏–µ**\\*\\*: –ò–∑—É—á–∏—Ç–µ –æ–±—ä–µ–∫—Ç `PodDisruptionBudget` –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å?\n\n```shell\nkubectl explain resourcequota\nvi handson/handson-12/resourcequota.yml\n#...\n```\n\nK8S Jobs Management and workload distribution\n---------------------------------------------\n1. Jobs Scheduling –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –≤–∏–¥—ã –∑–∞–ø—É—Å–∫–∞\n1. DaemonSets, CronJobs\n1. High Level –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã. Argo workflow etc.\n1. –î–µ–º–æ –∑–∞–ø—É—Å–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ jobs\n\nHands-on practice quest #12: Practice with DaemonSet and CronJob\n----------------------------------------------------------------\n–ó–Ω–∞–∫–æ–º–∏–º—Å—è —Å –Ω–æ–≤—ã–º–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è–º–∏ K8S –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤—ã—Ö –≤–∏–¥–æ–≤ —Ä–∞–±–æ—Ç\n\n**Given** –ø–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–º–µ—é—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é   –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ ingress –∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∑–∞–¥–∞–Ω–∏—è  \n**When** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  \n**–ó–∞–¥–∞–Ω–∏–µ**: –ø–µ—Ä–µ–¥–µ–ª–∞–π—Ç–µ app-knife `deployment` –≤ `daemonset`. –í–æ–∑—å–º–∏—Ç–µ –∑–∞ –æ—Å–Ω–æ–≤—É —Ç—É –≤–µ—Ä—Å–∏—é –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞\n\nüëÄ –≠—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –ë–µ–∑ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞\n\n```shell\nkubectl explain daemonset\nvi handson/handson-12/deployment.yml\n```\n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –ú–æ–∂–µ—Ç –ª–∏ daemonSet `selector.matchLabels` –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à–∏ —Å—Ç–∞—Ä—ã–µ –ø–æ–¥—ã –∏–∑ deployment?\n1. –ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, –¥–ª—è —á–µ–≥–æ —Ç–∞–∫ —Å–¥–µ–ª–∞–Ω–æ?\n1. –ß—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –∑–∞–ø—É—Å–∫–∞—Ç—å —Å –ø–æ–º–æ—â—å—é daemonset ?\n\n1. –ó–∞–¥–∞–Ω–∏–µ: –∑–∞–ø—É—Å—Ç–∏—Ç–µ cronjob –∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–µ—á–∞—Ç–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Å–æ–ª—å\n\nüëÄ –≠—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –ë–µ–∑ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞\n\n```shell\nkubectl explain cronjob\nvi handson/handson-12/deployment.yml\n```  \n\n**Then** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏\n1. –∫–∞–∫ —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ Job ?\n1. —á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ Job –µ—â—ë –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è, –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é? –ö–∞–∫ —ç—Ç–∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å?\n1. –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ —Ç–æ —á–µ—Ä–µ–∑ 24—á–∞—Å–∞ —É –º–µ–Ω—è –±—É–¥–µ—Ç –±–æ–ª—å—à–µ 17_000 –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö Job? –ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ?\n1. –º–æ–∂–µ—Ç –ª–∏ CronJob –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–Ω–æ–≥–æ Job –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ? (`kubectl explain cronjob.spec.startingDeadlineSeconds`)\n1. –∞ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫?\n\nüëÄ [–ü—Ä–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã CronJob](https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/#cron-job-limitations)\n\nK8S Base Homework\n-----------------\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –° –ø–æ–º–æ—â—å—é –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Ä–∞–Ω–µ–µ –∑–Ω–∞–Ω–∏–π —Ä–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å —Å NetworkPolicies —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ  \n**–ó–∞–¥–∞–Ω–∏–µ**: –Ω–∞–π–¥–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ NetworkPolicies –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –≤ –≤–∞—à–µ–º –Ω–µ–π–º—Å–ø–µ–π—Å–µ. –ü—Ä–æ–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:\n- —á—Ç–æ —Ç–∞–º –∑–∞ ip?\n- —á—Ç–æ —Ç–∞–º –∑–∞ ip?\n- —á—Ç–æ —ç—Ç–æ –∑–∞ –ø–æ–¥—Å–µ—Ç–∏?\n- —á—Ç–æ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è?\n- —á—Ç–æ –∑–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è?\n\n**–ó–∞–¥–∞–Ω–∏–µ**: –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è *app-knife* –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é *app-butter*\n- –° –ø–æ–º–æ—â—å—é —á–µ–≥–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ?\n- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ª–∏ —á—Ç–æ –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö –∑–∞–ø—Ä–æ—Å—ã –æ—Ç *app-knife* –∫ *app-butter* –±—É–¥—É—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã?\n\n\n\n"},"__N_SSG":true},"page":"/blocks/[blockKey]","query":{"blockKey":"CORE"},"buildId":"cXffKvlLOePk-11GuctoB","assetPrefix":"/k8s-training-theory-and-practice","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>